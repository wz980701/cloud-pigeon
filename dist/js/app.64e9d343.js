(function(t){function e(e){for(var i,r,o=e[0],c=e[1],l=e[2],u=0,f=[];u<o.length;u++)r=o[u],s[r]&&f.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},s={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"04da":function(t,e,a){"use strict";var i=a("478f"),s=a.n(i);s.a},"0757":function(t,e,a){},"0b98":function(t,e,a){},"0baa":function(t,e,a){},"0eac":function(t,e,a){},"103d":function(t,e,a){"use strict";var i=a("0b98"),s=a.n(i);s.a},1319:function(t,e,a){},"1e6c":function(t,e,a){},"207e":function(t,e,a){},"20bd":function(t,e,a){"use strict";var i=a("207e"),s=a.n(i);s.a},"23ea":function(t,e,a){"use strict";var i=a("5456"),s=a.n(i);s.a},"253c":function(t,e,a){"use strict";var i=a("0eac"),s=a.n(i);s.a},"25db":function(t,e,a){"use strict";var i=a("0baa"),s=a.n(i);s.a},2791:function(t,e,a){"use strict";var i=a("c76c"),s=a.n(i);s.a},"2a34":function(t,e,a){t.exports=a.p+"img/swiper_2.14818de7.jpg"},"2f7a":function(t,e,a){t.exports=a.p+"img/swiper_1.bce0faba.jpg"},3164:function(t,e,a){},"31bb":function(t,e,a){},3347:function(t,e,a){"use strict";var i=a("8822"),s=a.n(i);s.a},"35c2":function(t,e,a){"use strict";var i=a("504a"),s=a.n(i);s.a},"38f1":function(t,e,a){},"39c8":function(t,e,a){},"3de5":function(t,e,a){"use strict";var i=a("9e4c"),s=a.n(i);s.a},4099:function(t,e,a){"use strict";var i=a("99f9"),s=a.n(i);s.a},"478f":function(t,e,a){},"4b76":function(t,e){},"504a":function(t,e,a){},5456:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"router-fade",mode:"out-in"}},[a("keep-alive",[t.$route.meta.keepAlive?a("router-view"):t._e()],1)],1),a("transition",{attrs:{name:"router-fade",mode:"out-in"}},[t.$route.meta.keepAlive?t._e():a("router-view")],1)],1)},n=[],r={name:"app",created:function(){var t=document.documentElement.clientHeight;window.onload=function(){document.getElementById("app").style.height="".concat(t,"px")}}},o=r,c=(a("35c2"),a("2877")),l=Object(c["a"])(o,s,n,!1,null,"99bbf956",null),d=l.exports,u=a("8c4f"),f=a("2f62"),m=a("fe3c"),p=a.n(m),h=a("283e"),v=a.n(h),_=a("b970"),g=a("bc3a"),C=a.n(g),b=a("a7fe"),w=a.n(b),x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index_page"},[i("transition",{attrs:{name:"index_head-fade",mode:"in-out"}},[i("header",{directives:[{name:"show",rawName:"v-show",value:t.showIndex,expression:"showIndex"}],staticClass:"index_head"},[i("div",{staticClass:"logo_wrapper"},[i("img",{staticClass:"index_logo margin",attrs:{src:a("a346"),alt:"logo"}})]),i("h1",[t._v("CLOUD PIGEON")])])]),i("transition",{attrs:{name:"index_content-fade",mode:"in-out"}},[i("section",{directives:[{name:"show",rawName:"v-show",value:t.showIndex,expression:"showIndex"}],staticClass:"index_content"},[i("div",{staticClass:"rider",on:{click:t.getRider}},[i("div",{staticClass:"rider_head"},[i("img",{attrs:{src:a("da26"),alt:"Rider"}})]),i("p",[t._v("云鸽")])]),i("p",{staticClass:"index_or"},[t._v("or")]),i("div",{staticClass:"student",on:{click:t.getStudent}},[i("div",{staticClass:"student_head"},[i("img",{attrs:{src:a("f8f9"),alt:"student"}})]),i("p",[t._v("学生")])])])])],1)},k=[],L=a("f499"),$=a.n(L),O=(a("ac6a"),a("a745")),y=a.n(O);function T(t){this.$router.push(t)}function S(t,e){localStorage.setItem(t,e)}function E(t){return localStorage.getItem(t)}function R(t,e){sessionStorage.setItem(t,e)}function I(t){return sessionStorage.getItem(t)}function A(t){return y()(t)&&0===t.length}function j(t){var e=new Date(1e3*t),a=e.getFullYear()+"-",i=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",s=e.getDate()+"  ",n=e.getHours()+":",r=e.getMinutes()+":",o=e.getSeconds();return a+i+s+n+r+o}function N(t){var e=new Date(1e3*t),a=e.getMinutes()+30,i=e.getHours();a>60&&(a-=60,i+=1);var s=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",r=e.getDate()+"  ",o=i+":",c=a+":",l=e.getSeconds();return s+n+r+o+c+l}function P(t){var e=this;t.send("心跳包内容");var a=setInterval(function(){if(t.send("心跳包内容"),2==t.readyState||3==t.readyState){clearInterval(e.hb);var i=1,s=setInterval(function(){if(2==t.readyState||3==t.readyState){if(e.websocket=new WebSocket(t.url),t=e.websocket,5==i)return void clearInterval(s);i++}else 1==t.readyState&&(e._initWebsocket(),clearInterval(a),clearInterval(s))},4e3)}},15e3)}function D(t){var e=new FormData,a=t;for(var i in a)e.append(i,a[i]);return e}function W(t,e){return 1e14+e+""+t}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i["a"].axios.get(t,{params:e})}function J(t,e){return i["a"].axios.post(t,e)}function U(t){var e=t.data.data;return e.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),e}function B(t){return J("/login",t)}function H(t){return J("/register",t)}function Y(t){return F("/order/refresh",t)}function q(t){return F("/user/changeAddress",t)}function V(t){return F("/order/detail",t)}function M(){return F("/logout")}function K(t){return J("/order/generate_wx",t)}function G(t){return F("/order/confirm",t)}function Q(t){return F("/order/cancel_wx",t)}function X(){return F("/recipe/all")}function z(t){return F("/wx/check",t)}var Z={name:"Index",data:function(){return{showIndex:!1}},mounted:function(){this.showIndex=!0},methods:{getRider:function(){var t=this;if(E("rider_token")){var e=new FormData;e.append("role","delivery"),e.append("token",E("rider_token")),B(e).then(function(e){var a=e.data.data;R("rider_info",$()(a)),A(JSON.parse(I("rider_info")))?(_["a"].alert({message:"账号已过期，请重新登录"}),t.$router.push("/riderLogin")):t.$router.push("/riderOrder")}).catch(function(){_["a"].alert({message:"账号已过期，请重新登录"})})}else _["a"].alert({message:"请先注册账号"}),this.$router.push("/riderRegist")},getStudent:function(){var t=this;if(E("user_token")){var e=new FormData;e.append("role","user"),e.append("token",E("user_token")),B(e).then(function(e){var a=e.data.data;R("user_info",$()(a)),A(JSON.parse(I("user_info")))?(_["a"].alert({message:"账号已过期，请重新登录"}),t.$router.push("/studentLogin")):t.$router.push("/home")}).catch(function(){_["a"].alert({message:"账号已过期，请重新登录"})})}else _["a"].alert({message:"请先注册账号"}),this.$router.push("/studentRegist")}}},tt=Z,et=(a("ebb4"),Object(c["a"])(tt,x,k,!1,null,"028df1ce",null)),at=et.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rg_page"},[i("router-link",{staticClass:"rg_back",attrs:{to:"/index",tag:"div"}},[i("img",{attrs:{src:a("b2a3"),alt:"index"}})]),i("transition",{attrs:{name:"rg-fade",mode:"in-out"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRegist,expression:"showRegist"}],staticClass:"rg_box"},[i("header",{staticClass:"rg_head"},[i("div",{staticClass:"logo_wrapper"},[i("img",{attrs:{src:a("a346"),alt:"logo"}})])]),i("section",{staticClass:"rg_form"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.name.$model,expression:"$v.formdata.name.$model",modifiers:{trim:!0}}],staticClass:"rg_name",attrs:{type:"text",placeholder:"请输入姓名"},domProps:{value:t.$v.formdata.name.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.name,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.name.required?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 必须输入姓名\n                ")]),t.$v.formdata.name.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入真实姓名\n                ")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.sid.$model,expression:"$v.formdata.sid.$model",modifiers:{trim:!0}}],staticClass:"rg_studentNum",attrs:{type:"text",placeholder:"请输入学号"},domProps:{value:t.$v.formdata.sid.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.sid,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.sid.required?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 必须输入学号\n                ")]),t.$v.formdata.sid.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 学号为10位\n                ")]),t.$v.formdata.sid.maxLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 学号为10位\n                ")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.phone.$model,expression:"$v.formdata.phone.$model",modifiers:{trim:!0}}],staticClass:"rg_phone",attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:t.$v.formdata.phone.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.phone,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.phone.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),t.$v.formdata.phone.maxLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.password.$model,expression:"$v.formdata.password.$model",modifiers:{trim:!0}}],staticClass:"rg_name",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.$v.formdata.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.password.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 密码不能少于6位\n                ")]),i("input",{staticClass:"rg_registBtn",attrs:{type:"button",value:"注册"},on:{click:t.ToRegist}}),i("router-link",{staticClass:"rg_login",attrs:{to:"/riderLogin",tag:"div"}},[t._v("\n                    Sign In\n                ")])],1)])])],1)},st=[],nt=a("b5ae"),rt={name:"RiderRegist",data:function(){return{formdata:{name:"",phone:"",password:"",sid:"",role:"delivery"},showRegist:!1}},validations:{formdata:{name:{required:nt["required"],minLength:Object(nt["minLength"])(2)},sid:{required:nt["required"],minLength:Object(nt["minLength"])(10),maxLength:Object(nt["maxLength"])(10)},phone:{minLength:Object(nt["minLength"])(11),maxLength:Object(nt["maxLength"])(11),numeric:nt["numeric"]},password:{minLength:Object(nt["minLength"])(6)}}},mounted:function(){this.showRegist=!0},methods:{ToRegist:function(){var t=this;if(this.$v.$invalid)this.ToRemind("请正确填写信息");else{var e=D(this.formdata);H(e).then(function(e){t.getRes(e)}).catch(function(){t.getFail()})}},getRes:function(t){var e=t.data.code;0!==e?_["a"].alert({message:"该手机号已被注册"}):this.getSuc()},getSuc:function(){this.ToRemind("注册成功,请耐心等待后台审核"),this.$router.push("/index")},getFail:function(){this.ToRemind("注册失败，请重新注册")},ToRemind:function(t){_["a"].alert({message:t})}}},ot=rt,ct=(a("d784"),Object(c["a"])(ot,it,st,!1,null,"b921a60c",null)),lt=ct.exports,dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sg_page"},[i("router-link",{staticClass:"sg_back",attrs:{to:"/index",tag:"div"}},[i("img",{attrs:{src:a("b2a3"),alt:"index"}})]),i("transition",{attrs:{name:"rg-fade",mode:"in-out"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRegist,expression:"showRegist"}],staticClass:"sg_box"},[i("header",{staticClass:"sg_head"},[i("div",{staticClass:"logo_wrapper"},[i("img",{attrs:{src:a("a346"),alt:"logo"}})])]),i("section",{staticClass:"sg_form"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.name.$model,expression:"$v.formdata.name.$model",modifiers:{trim:!0}}],staticClass:"sg_name",attrs:{autofocus:"",type:"text",placeholder:"请输入姓名"},domProps:{value:t.$v.formdata.name.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.name,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.name.required?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 必须输入姓名\n                ")]),t.$v.formdata.name.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入真实姓名\n                ")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.phone.$model,expression:"$v.formdata.phone.$model",modifiers:{trim:!0}}],staticClass:"sg_phone",attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:t.$v.formdata.phone.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.phone,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.phone.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),t.$v.formdata.phone.maxLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.password.$model,expression:"$v.formdata.password.$model",modifiers:{trim:!0}}],staticClass:"sg_name",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.$v.formdata.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.password.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 密码不能少于6位\n                ")]),i("div",{staticClass:"sg_location"},[i("label",[t._v("配送地址:")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.building.$model,expression:"$v.formdata.building.$model",modifiers:{trim:!0}}],staticClass:"sg_building",attrs:{min:"7",max:"48",type:"text",placeholder:"XX"},domProps:{value:t.$v.formdata.building.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.building,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),i("label",[t._v("栋")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.dorm.$model,expression:"$v.formdata.dorm.$model",modifiers:{trim:!0}}],staticClass:"sg_dormitory",attrs:{type:"text",placeholder:"宿舍号"},domProps:{value:t.$v.formdata.dorm.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.dorm,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t.$v.formdata.building.required?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 必须填写地址\n                ")]),t.$v.formdata.building.minValue?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确地址\n                ")]),t.$v.formdata.building.maxValue?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确地址\n                ")]),t.$v.formdata.dorm.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确地址\n                ")]),t.$v.formdata.dorm.maxLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确地址\n                ")]),i("input",{staticClass:"sg_registBtn",attrs:{type:"submit",value:"注册"},on:{click:t.ToRegist}}),i("router-link",{staticClass:"sg_login",attrs:{to:"/studentLogin",tag:"div"}},[t._v("\n                    Sign In\n                ")])],1)])])],1)},ut=[],ft={name:"StudentRegist",data:function(){return{formdata:{name:"",phone:"",password:"",studentName:"",role:"user",building:"",dorm:""},showRegist:!1}},validations:{formdata:{name:{required:nt["required"],minLength:Object(nt["minLength"])(2)},phone:{minLength:Object(nt["minLength"])(11),maxLength:Object(nt["maxLength"])(11),numeric:nt["numeric"]},password:{minLength:Object(nt["minLength"])(6)},building:{required:nt["required"],minValue:Object(nt["minValue"])(7),maxValue:Object(nt["maxValue"])(48)},dorm:{required:nt["required"],minLength:3,maxLength:3,numeric:nt["numeric"]}}},mounted:function(){this.showRegist=!0},methods:{ToRegist:function(){var t=this;if(this.$v.$invalid)this.ToRemind("请正确填写信息");else{var e=D(this.formdata);H(e).then(function(e){t.getRes(e)}).catch(function(){t.getFail()})}},getRes:function(t){var e=t.data.code;0!==e?_["a"].alert({message:"该手机号已被注册"}):this.getSuc(t)},getSuc:function(t){var e=t.data.data;this.ToRemind("注册成功"),S("user_token",e.token),this.ToLogin()},getFail:function(){this.ToRemind("注册失败，请重新注册")},ToRemind:function(t){_["a"].alert({message:t})},ToLogin:function(){var t=this,e=new FormData;e.append("token",E("user_token")),e.append("role",this.formdata.role),B(e).then(function(e){var a=e.data.data;R("user_info",$()(a)),t.$router.push("/home")})}}},mt=ft,pt=(a("253c"),Object(c["a"])(mt,dt,ut,!1,null,"8ba252e0",null)),ht=pt.exports,vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l_page"},[i("router-link",{staticClass:"l_back",attrs:{to:"/index",tag:"div"}},[i("img",{attrs:{src:a("b2a3"),alt:"index"}})]),i("transition",{attrs:{name:"rl-fade",mode:"in-out"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLogin,expression:"showLogin"}],staticClass:"l_box"},[i("header",{staticClass:"l_head"},[i("div",{staticClass:"logo_wrapper"},[i("img",{attrs:{src:a("a346"),alt:"logo"}})])]),i("section",{staticClass:"l_form"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.phone.$model,expression:"$v.formdata.phone.$model",modifiers:{trim:!0}}],staticClass:"l_phone",attrs:{autofocus:"",type:"text",placeholder:"请输入手机号"},domProps:{value:t.$v.formdata.phone.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.phone,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.phone.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),t.$v.formdata.phone.numeric?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确的手机号码\n                ")]),t.$v.formdata.phone.maxLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.password.$model,expression:"$v.formdata.password.$model",modifiers:{trim:!0}}],staticClass:"l_name",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.$v.formdata.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.password.minLength?t._e():i("span",{staticClass:"form-group_message"},[t._v("\n                * 密码不能少于6位\n                ")]),i("input",{staticClass:"l_loginBtn",attrs:{type:"button",value:"登录"},on:{click:t.ToLogin}}),"user"===t.formdata.role?i("router-link",{staticClass:"l_regist",attrs:{to:"/studentRegist",tag:"div"}},[t._v("\n                    Sign Up\n                ")]):i("router-link",{ref:"signUp",staticClass:"l_regist",attrs:{to:"/riderRegist",tag:"div"}},[t._v("\n                    Sign Up\n                ")])],1)])])],1)},_t=[],gt=(a("28a5"),{name:"StudentLogin",data:function(){return{formdata:{role:"user",phone:"",password:""},path:"/home",showLogin:!1}},validations:{formdata:{phone:{minLength:Object(nt["minLength"])(11),maxLength:Object(nt["maxLength"])(11),numeric:nt["numeric"],required:nt["required"]},password:{minLength:Object(nt["minLength"])(6),required:nt["required"]}}},created:function(){"studentLogin"!==this.$route.path.split("/")[1]&&(this.formdata.role="delivery",this.path="/riderOrder")},mounted:function(){this.showLogin=!0},methods:{ToLogin:function(){var t=this;if(this.$v.$invalid)_["a"].alert({message:"请正确填写账号密码"});else{var e=D(this.formdata);B(e).then(function(e){t.getRes(e)}).catch(function(){t.getFail()})}},getRes:function(t){var e=t.data.code;0!==e?_["a"].alert({message:"账号或密码有误"}):this.getSuc(t)},getSuc:function(t){var e=t.data.data;this.getStore(e),_["a"].alert({message:"登录成功"}),this.$router.push(this.path)},getFail:function(){_["a"].alert({message:"登录失败"})},getStore:function(t){"user"===this.formdata.role?(R("user_info",$()(t)),S("user_token",t.token)):(R("rider_info",$()(t)),S("rider_token",t.token))}}}),Ct=gt,bt=(a("3347"),Object(c["a"])(Ct,vt,_t,!1,null,"19a349e8",null)),wt=bt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"h_page"},[i("head-top",{attrs:{home:t.area}}),i("van-swipe",{staticClass:"h_swiper",attrs:{autoplay:3e3}},[i("van-swipe-item",[i("img",{attrs:{src:a("2f7a")}})]),i("van-swipe-item",[i("img",{attrs:{src:a("2a34")}})]),i("van-swipe-item",[i("img",{attrs:{src:a("610c")}})]),i("van-swipe-item",[i("img",{attrs:{src:a("a7f3")}})]),i("van-swipe-item",[i("img",{attrs:{src:a("8b3a")}})])],1),i("section",{staticClass:"h_content"},[i("router-link",{staticClass:"h_fourth",attrs:{to:"/shop",tag:"div"}},[i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("c1a1"),alt:"food"}})]),i("p",[t._v("第四食堂")])])],1),i("footer-bottom",{attrs:{currentIndex:0}})],1)},kt=[],Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"f_page"},t._l(t.arr,function(e,i){return a("div",{key:i,staticClass:"f_item home",class:{active:t.currentIndex===i},on:{click:function(a){t.ToActive(i),t.LinkTo(e.path)}}},[a("i",{class:e.icon_class}),a("p",[t._v(t._s(e.text))])])}),0)},$t=[],Ot={name:"footerBottom",data:function(){return{arr:[{icon_class:"iconfont icon-home",text:"首页",path:"/home"},{icon_class:"iconfont icon-order",text:"订单",path:"/order"},{icon_class:"iconfont icon-my",text:"我的",path:"/my"}]}},props:["currentIndex"],methods:{ToActive:function(t){this.currentIndex=t,1!==t&&this.$emit("changeActive")},LinkTo:function(t){this.$router.push(t)}}},yt=Ot,Tt=(a("b737"),a("6bb5"),Object(c["a"])(yt,Lt,$t,!1,null,"a87206c6",null)),St=Tt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"head"},[t._t("exit"),t.center?a("section",{staticClass:"head_center"},[t._v("\n        "+t._s(t.center)+"\n    ")]):t._e(),t.goBack?a("section",{staticClass:"head_goBack",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"iconfont icon-l_arrow"}),a("p",[t._v(t._s(t.goBack))])]):t._e(),t.home?a("section",{staticClass:"head_home"},[t._m(0),a("div",{staticClass:"h_location"},[a("p",[t._v(t._s(t.home))])])]):t._e()],2)},Rt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"h_img"},[i("img",{attrs:{src:a("d7db"),alt:"head"}})])}],It={name:"Header",props:["home","goBack","center"]},At=It,jt=(a("5c3d"),Object(c["a"])(At,Et,Rt,!1,null,"7b374e78",null)),Nt=jt.exports,Pt={name:"Home",data:function(){return{area:"未选定"}},mounted:function(){this.area=JSON.parse(I("user_info")).district},components:{footerBottom:St,headTop:Nt}},Dt=Pt,Wt=(a("72b7"),Object(c["a"])(Dt,xt,kt,!1,null,"44f1f5ac",null)),Ft=Wt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"o_page"},[a("head-top",{attrs:{center:"我的订单"}}),a("div",{staticClass:"o_tab"},t._l(t.tabList,function(e,i){return a("div",{key:i,staticClass:"o_tab-item",on:{click:function(e){return t.ToActive(i)}}},[a("router-link",{class:{active:e.active},attrs:{to:e.path}},[t._v(t._s(e.text))])],1)}),0),a("keep-alive",[a("router-view")],1),a("footer-bottom",{attrs:{currentIndex:1},on:{changeActive:function(e){return t.ToActive(0)}}})],1)},Ut=[],Bt={name:"Order",data:function(){return{orderList:[],tabList:[{path:"/askOrder",text:"未接单",active:!0},{path:"/waitOrder",text:"已接单",active:!1},{path:"/cancelOrder",text:"已取消",active:!1},{path:"/finishOrder",text:"已完成",active:!1}]}},methods:{ToActive:function(t){this.tabList.forEach(function(t){t.active=!1}),this.tabList[t].active=!0}},components:{footerBottom:St,headTop:Nt}},Ht=Bt,Yt=(a("2791"),Object(c["a"])(Ht,Jt,Ut,!1,null,"d16ead80",null)),qt=Yt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m_page"},[a("header",{staticClass:"m_head"},[t._v("\n        我的云鸽\n    ")]),a("section",{staticClass:"m_info"},[t._m(0),a("div",{staticClass:"content"},[a("p",{staticClass:"userName"},[t._v(t._s(t.userName))]),t._m(1)])]),a("ul",{staticClass:"m_list"},t._l(t.myList,function(e,i){return a("li",{key:i,staticClass:"m_item",on:{click:function(e){return t.ToSetting(i)}}},[a("i",{class:e.class}),t._v("\n            "+t._s(e.text)+"\n        ")])}),0),a("footer-bottom",{attrs:{currentIndex:2}})],1)},Mt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("d7db"),alt:"user_head"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userInfo"},[t._v("\n            个人信息\n            "),a("i",{staticClass:"iconfont icon-r_arrow"})])}],Kt=(a("7f7f"),{name:"My",data:function(){return{myList:[{class:"iconfont icon-location",text:"配送地修改"},{class:"iconfont icon-help",text:"帮助与反馈"},{class:"iconfont icon-service",text:"客服中心"},{class:"iconfont icon-shop",text:"商家入驻"},{class:"iconfont icon-cooperation",text:"我要合作"},{class:"iconfont icon-user",text:"云鸽招募"},{class:"iconfont icon-about",text:"关于我们"},{class:"iconfont icon-about",text:"退出登录"}],userName:""}},mounted:function(){this.userName=JSON.parse(I("user_info")).name},components:{footerBottom:St},methods:{ToSetting:function(t){var e=this;0==t?this.$router.push("/modifyLocation"):7==t?_["a"].confirm({message:"确认退出登录吗？"}).then(function(){M().catch(function(){_["a"].alert({message:"退出登录失败"})}),e.$router.push("/studentLogin")}).catch(function(){}):1==t?this.$router.push("/help"):this.$router.push("/contact")}}}),Gt=Kt,Qt=(a("850d"),a("a86d"),Object(c["a"])(Gt,Vt,Mt,!1,null,"3e681426",null)),Xt=Qt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("div",{staticClass:"back",on:{click:t.RouteTo}},[a("i",{staticClass:"iconfont icon-l_arrow"})]),t._m(0),t._m(1)]),t._m(2),a("keep-alive",[a("router-view")],1)],1)},Zt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-wrapper"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:a("76eb"),width:"64",height:"64"}})]),i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[i("span",{staticClass:"name"},[t._v("第四食堂")])]),i("div",{staticClass:"description"},[t._v("\n                    云鸽专送 / 30分钟送达\n                ")]),i("div",{staticClass:"supports"},[i("div",{staticClass:"supports_desc"},[i("img",{staticClass:"img",attrs:{src:a("d14d"),alt:"up_door"}}),i("span",{staticClass:"text"},[t._v("支持送货上门服务")])])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("img",{attrs:{src:a("76eb"),width:"100%",height:"100%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab"},[a("div",{staticClass:"tab-item"},[t._v("\n            配送时间： 午餐11-13点 晚餐17-20点 宵夜21-22点半\n        ")])])}],te={name:"Shop",methods:{RouteTo:function(){this.$router.push("/home")}}},ee=te,ae=(a("103d"),Object(c["a"])(ee,zt,Zt,!1,null,"8e9eca06",null)),ie=ae.exports,se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"wo_page",staticClass:"wo_page"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"wo_loading"}),i("ul",{ref:"wo_list",staticClass:"wo_list"},t._l(t.allOrderList,function(e,s){return i("li",{key:s,staticClass:"wo_item",on:{click:function(e){return t.ToDetail(s)}}},[i("div",{staticClass:"item_head"},[i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),i("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),i("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),i("div",{staticClass:"item_line"}),i("div",{staticClass:"item_content"},[i("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),i("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),e.deliveryphone?i("p",{staticClass:"phone"},[t._v("云鸽电话： "+t._s(e.deliveryphone))]):t._e(),i("p",{staticClass:"arrive_time"},[t._v("预计"+t._s(e.time)+"分钟到达")])]),i("input",{staticClass:"confirm_btn",attrs:{type:"button",value:"确认送达"},on:{click:function(e){return e.stopPropagation(),t.ToConfirmOrder(s)}}})])}),0)],1)],1)},ne=[],re=a("1fba");i["a"].use(_["c"]),i["a"].use(_["b"]);var oe={name:"WaitOrder",data:function(){return{isInit:!1,isLoading:!1,allOrderList:[],params:null}},created:function(){var t=this;this.params={status:"已接单"},Y(this.params).then(function(e){e.data.data.forEach(function(t){t.timestamp=t.created_at,t.time=N(t.created_at),t.created_at=j(t.created_at)}),t.allOrderList=e.data.data,t.isInit=!0}).catch(function(){_["a"].alert({message:"获取列表错误"})}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.wo_page=new re["a"](this.$refs.wo_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Y(t.params).then(function(e){e.data.data.forEach(function(t){t.timestamp=t.created_at,t.time=N(t.created_at),t.created_at=j(t.created_at)}),t.allOrderList=e.data.data,R("all_list",$()(t.allOrderList)),t.isInit=!0}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToDetail:function(t){R("order_id",this.allOrderList[t].serial_id),this.$router.push("/orderDetail")},ToConfirmOrder:function(t){var e=this;_["a"].confirm({message:"确认已送达吗？"}).then(function(){var a={serial_id:e.allOrderList[t].serial_id};G(a).then(function(){_["a"].alert({message:"确认成功"}),e.allOrderList.splice(t,1)}).catch(function(){_["a"].alert({message:"确认失败"})})}).catch(function(){})},RouteTo:T}},ce=oe,le=(a("3de5"),Object(c["a"])(ce,se,ne,!1,null,"dd8b522a",null)),de=le.exports,ue=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"ao_page",staticClass:"ao_page"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"ao_loading"}),i("ul",{ref:"ao_list",staticClass:"ao_list"},t._l(t.askOrderList,function(e,s){return i("li",{key:s,staticClass:"ao_item",on:{click:function(e){return t.ToDetail(s)}}},[i("div",{staticClass:"item_head"},[i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),i("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),i("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),i("div",{staticClass:"item_line"}),i("div",{staticClass:"item_content"},[i("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),i("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),i("input",{ref:"cancel_btn",refInFor:!0,staticClass:"cancel_btn",attrs:{type:"button",value:"取消订单"},on:{click:function(e){return e.stopPropagation(),t.ToCancel(s)}}})])])}),0)],1)],1)},fe=[],me=a("5d73"),pe=a.n(me);i["a"].use(_["c"]),i["a"].use(_["b"]);var he={name:"AskOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],websocket:null,params:null}},created:function(){var t=this;this._initWebsocket(),this.params={status:"未接单"},Y(this.params).then(function(e){var a=e.data.data;a.forEach(function(t){t.timestamp=t.created_at,t.order_id=W(t.timestamp,t.serial_id),t.created_at=j(t.created_at)}),t.askOrderList=e.data.data,t.isInit=!0}).catch(function(){_["a"].alert({message:"获取列表错误"})}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.ao_page=new re["a"](this.$refs.ao_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Y(t.params).then(function(e){e.data.data.forEach(function(t){t.timestamp=t.created_at,t.order_id=W(t.timestamp,t.serial_id),t.created_at=j(t.created_at)}),t.askOrderList=e.data.data}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToDetail:function(t){R("order_id",this.askOrderList[t].serial_id),this.$router.push("/orderDetail")},ToCancel:function(t){var e=this;_["a"].confirm({message:"确认要取消订单吗？"}).then(function(){var a={serial_id:e.askOrderList[t].serial_id};Q(a).then(function(){e.askOrderList.splice(t,1),_["a"].alert({message:"取消订单成功"})}).catch(function(){_["a"].alert({message:"取消订单失败"})})}).catch(function(){})},_initWebsocket:function(){var t=this,e="ws://101.132.181.245:9501";this.websocket=new WebSocket(e),this.websocket.onopen=function(){P(t.websocket)},this.websocket.onclose=function(){console.log("Disconnected")},this.websocket.onmessage=function(e){var a=JSON.parse(e.data);t.getDelivery(a),console.log("Retrieved data from server: "+a.message)},this.websocket.onerror=function(t){console.log("Error occured: "+t.data)}},getDelivery:function(t){if("delivery"==t.message){var e=!0,a=!1,i=void 0;try{for(var s,n=pe()(this.askOrderList);!(e=(s=n.next()).done);e=!0){var r=s.value;r["serial_id"]==t.id&&this.askOrderList.splice(this.askOrderList.indexOf(r),1)}}catch(o){a=!0,i=o}finally{try{e||null==n.return||n.return()}finally{if(a)throw i}}}},RouteTo:T}},ve=he,_e=(a("4099"),Object(c["a"])(ve,ue,fe,!1,null,"2c3fd644",null)),ge=_e.exports,Ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"co_page",staticClass:"co_page"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"ao_loading"}),i("ul",{ref:"co_list",staticClass:"co_list"},t._l(t.cancelOrderList,function(e,s){return i("li",{key:s,staticClass:"co_item",on:{click:function(e){return t.ToDetail(s)}}},[i("div",{staticClass:"item_head"},[i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),i("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))])]),i("div",{staticClass:"item_line"}),i("div",{staticClass:"item_content"},[i("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),i("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),i("p",{staticClass:"cancel_btn"},[t._v("已取消")])])])}),0)],1)],1)},be=[];i["a"].use(_["c"]),i["a"].use(_["b"]);var we={name:"CancelOrder",data:function(){return{isInit:!1,isLoading:!1,cancelOrderList:[],params:null}},created:function(){var t=this;this.params={status:"已取消"},Y(this.params).then(function(e){t.cancelOrderList=U(e),t.isInit=!0}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.co_page=new re["a"](this.$refs.co_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Y(t.params).then(function(e){t.cancelOrderList=U(e)}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToDetail:function(t){R("order_id",this.cancelOrderList[t].serial_id),this.$router.push("/orderDetail")},RouteTo:T}},xe=we,ke=(a("6e24"),Object(c["a"])(xe,Ce,be,!1,null,"2f24c5ad",null)),Le=ke.exports,$e=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"fo_page",staticClass:"fo_page"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"fo_loading"}),i("ul",{ref:"fo_list",staticClass:"fo_list"},t._l(t.cancelOrderList,function(e,s){return i("li",{key:s,staticClass:"fo_item",on:{click:function(e){return t.ToDetail(s)}}},[i("div",{staticClass:"item_head"},[i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),i("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))])]),i("div",{staticClass:"item_line"}),i("div",{staticClass:"item_content"},[i("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),i("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),i("p",{staticClass:"finish_btn"},[t._v("已完成")])])])}),0)],1)],1)},Oe=[];i["a"].use(_["c"]),i["a"].use(_["b"]);var ye={name:"CancelOrder",data:function(){return{isInit:!1,isLoading:!1,cancelOrderList:[],params:null}},created:function(){var t=this;this.params={status:"已完成"},Y(this.params).then(function(e){t.cancelOrderList=U(e),t.isInit=!0}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.fo_page=new re["a"](this.$refs.fo_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Y(t.params).then(function(e){t.cancelOrderList=U(e)}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToDetail:function(t){R("order_id",this.cancelOrderList[t].serial_id),this.$router.push("/orderDetail")},RouteTo:T}},Te=ye,Se=(a("cc32"),Object(c["a"])(Te,$e,Oe,!1,null,"6bd91990",null)),Ee=Se.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml_page"},[a("head-top",{attrs:{goBack:"配送地址修改"}}),a("div",{staticClass:"ml_location"},[a("label",[t._v("配送地址:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.building,expression:"building"}],staticClass:"ml_building",attrs:{min:"7",max:"48",type:"text",placeholder:"XX"},domProps:{value:t.building},on:{input:function(e){e.target.composing||(t.building=e.target.value)}}}),a("label",[t._v("栋")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dorm,expression:"dorm"}],staticClass:"ml_dormitory",attrs:{type:"text",placeholder:"宿舍号"},domProps:{value:t.dorm},on:{input:function(e){e.target.composing||(t.dorm=e.target.value)}}})]),a("input",{staticClass:"ml_btn",attrs:{type:"button",value:"修改"},on:{click:t.ToModify}})],1)},Ie=[],Ae=a("5176"),je=a.n(Ae),Ne={name:"ModifyLocation",data:function(){return{building:"",dorm:""}},methods:{ToModify:function(){var t=this,e={building:this.building,dorm:this.dorm};q(e).then(function(e){var a=e.data.data,i=JSON.parse(I("user_info")),s=je()(i,a);R("user_info",$()(s)),_["a"].alert({message:"修改成功"}),t.$router.push("/my")}).catch(function(t){_["a"].alert({message:t})})}},components:{headTop:Nt}},Pe=Ne,De=(a("d8ef"),a("7b76"),Object(c["a"])(Pe,Re,Ie,!1,null,"7f6b076d",null)),We=De.exports,Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ro_page"},[a("head-top",{staticClass:"ro_head",attrs:{center:"我的订单"}},[a("i",{staticClass:"iconfont icon-quit",attrs:{slot:"exit"},on:{click:t.ToExit},slot:"exit"})]),a("div",{staticClass:"ro_tab"},t._l(t.tabList,function(e,i){return a("div",{key:i,staticClass:"ro_tab-item",on:{click:function(e){return t.ToActive(t.tabList,i)}}},[a("router-link",{class:{active:e.active},attrs:{to:e.path}},[t._v(t._s(e.text))])],1)}),0),a("keep-alive",[a("router-view")],1)],1)},Je=[],Ue={name:"Order",data:function(){return{params:null,tabList:[{path:"/askRiderOrder",text:"未接单",active:!0},{path:"/waitRiderOrder",text:"未送达",active:!1},{path:"/pastRiderOrder",text:"已送达",active:!1}]}},methods:{ToActive:function(t,e){t.forEach(function(t){t.active=!1}),t[e].active=!0},ToExit:function(){var t=this;_["a"].confirm({message:"确认退出登录吗？"}).then(function(){M().catch(function(){_["a"].alert({message:"退出登录失败"})}),t.ToActive(t.tabList,0),t.$router.push("/riderLogin")}).catch(function(){})}},components:{headTop:Nt}},Be=Ue,He=(a("e2ab"),a("63eb"),Object(c["a"])(Be,Fe,Je,!1,null,"d83fec92",null)),Ye=He.exports,qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"wro_page",staticClass:"wro_page"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"wro_loading"}),i("div",{staticClass:"wro_district"},t._l(t.districtList,function(e,a){return i("div",{key:a,staticClass:"wro_district-item",on:{click:function(e){return t.ToActive(t.districtList,a)}}},[i("div",{class:{active:e.active}},[t._v(t._s(e.text))])])}),0),i("ul",{ref:"wro_list",staticClass:"wro_list"},t._l(t.askOrderList,function(e,s){return i("li",{key:s,staticClass:"wro_item",on:{click:function(e){return t.ToDetail(s)}}},[i("div",{staticClass:"item_head"},[i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),i("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),i("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),i("div",{staticClass:"item_line"}),i("div",{staticClass:"item_content"},[i("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),i("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),i("p",{staticClass:"phone"},[t._v("用户电话： "+t._s(e.userphone))])])])}),0)],1)],1)},Ve=[];i["a"].use(_["c"]),i["a"].use(_["b"]);var Me={name:"WaitRiderOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],districtList:[{text:"全部",active:!0,district:""},{text:"西区",active:!1,district:"西区"},{text:"北区",active:!1,district:"北区"},{text:"南区",active:!1,district:"南区"}],params:null}},created:function(){var t=this;this._initWebsocket(),this._getList(this.districtList[0].district),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.wro_page=new re["a"](this.$refs.wro_page,{click:!0})},_initWebsocket:function(){var t=this,e="ws://101.132.181.245:9501";this.websocket=new WebSocket(e),this.websocket.onopen=function(){P(t.websocket)},this.websocket.onclose=function(){console.log("Disconnected")},this.websocket.onmessage=function(e){var a=JSON.parse(e.data);t.getDelivery(a),console.log("Retrieved data from server: "+a.message)},this.websocket.onerror=function(t){console.log("Error occured: "+t.data)}},getDelivery:function(t){if("delivery"==t.message){var e=JSON.parse(I("accept_order"));this.askOrderList.unshift(e)}},ToDetail:function(t){R("order_id",this.askOrderList[t].serial_id),this.$router.push("/riderOrderDetail")},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Y(t.params).then(function(e){t.askOrderList=U(e)}).catch(function(){}),t.$nextTick(function(){t._initScroll()})},500)},ToActive:function(t,e){this._getList(this.districtList[e].district),t.forEach(function(t){t.active=!1}),t[e].active=!0},_getList:function(t){var e=this;this.params=""==t?{status:"已接单"}:{status:"已接单",district:t},Y(this.params).then(function(t){e.askOrderList=U(t)}).catch(function(){_["a"].alert({message:"获取列表失败"})}),this.isInit=!0},RouteTo:T}},Ke=Me,Ge=(a("b8f1"),Object(c["a"])(Ke,qe,Ve,!1,null,"779a2652",null)),Qe=Ge.exports,Xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"pro_page",staticClass:"pro_page"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"pro_loading"}),i("div",{staticClass:"pro_district"},t._l(t.districtList,function(e,a){return i("div",{key:a,staticClass:"pro_district-item",on:{click:function(e){return t.ToActive(t.districtList,a)}}},[i("div",{class:{active:e.active}},[t._v(t._s(e.text))])])}),0),i("ul",{ref:"pro_list",staticClass:"pro_list"},t._l(t.askOrderList,function(e,s){return i("li",{key:s,staticClass:"pro_item",on:{click:function(e){return t.ToDetail(s)}}},[i("div",{staticClass:"item_head"},[i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),i("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),i("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),i("div",{staticClass:"item_line"}),i("div",{staticClass:"item_content"},[i("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),i("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),i("p",{staticClass:"phone"},[t._v("用户电话： "+t._s(e.userphone))])])])}),0)],1)],1)},ze=[];i["a"].use(_["c"]),i["a"].use(_["b"]);var Ze={name:"PastRiderOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],districtList:[{text:"全部",active:!0,district:""},{text:"西区",active:!1,district:"西区"},{text:"北区",active:!1,district:"北区"},{text:"南区",active:!1,district:"南区"}],params:null}},created:function(){var t=this;this._getList(this.districtList[0].district),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.pro_page=new re["a"](this.$refs.pro_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Y(t.params).then(function(e){t.askOrderList=U(e)}),t.$nextTick(function(){t._initScroll()})},500)},ToActive:function(t,e){this._getList(this.districtList[e].district),t.forEach(function(t){t.active=!1}),t[e].active=!0},ToDetail:function(t){R("order_id",this.askOrderList[t].serial_id),this.$router.push("/riderOrderDetail")},_getList:function(t){var e=this;this.params=""==t?{status:"已完成"}:{status:"已完成",district:t},Y(this.params).then(function(t){e.askOrderList=U(t)}).catch(function(){_["a"].alert({message:"获取列表失败"})}),this.isInit=!0},RouteTo:T}},ta=Ze,ea=(a("20bd"),Object(c["a"])(ta,Xe,ze,!1,null,"509984e4",null)),aa=ea.exports,ia=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"aro_page",staticClass:"aro_page"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"aro_loading"}),i("div",{staticClass:"aro_district"},t._l(t.districtList,function(e,a){return i("div",{key:a,staticClass:"aro_district-item",on:{click:function(e){return t.ToActive(t.districtList,a)}}},[i("div",{class:{active:e.active}},[t._v(t._s(e.text))])])}),0),i("ul",{ref:"aro_list",staticClass:"aro_list"},t._l(t.askOrderList,function(e,s){return i("li",{key:s,staticClass:"aro_item",on:{click:function(e){return t.ToDetail(s)}}},[i("div",{staticClass:"item_head"},[i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),i("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),i("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),i("div",{staticClass:"item_line"}),i("div",{staticClass:"item_content"},[i("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),i("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),i("p",{staticClass:"phone"},[t._v("用户电话： "+t._s(e.userphone))]),i("input",{ref:"cancel_btn",refInFor:!0,staticClass:"cancel_btn",attrs:{type:"button",value:"接单"},on:{click:function(e){return e.stopPropagation(),t.ToAccept(s)}}})])])}),0)],1)],1)},sa=[];i["a"].use(_["c"]),i["a"].use(_["b"]);var na={name:"AskOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],districtList:[{text:"全部",active:!0,district:""},{text:"西区",active:!1,district:"西区"},{text:"北区",active:!1,district:"北区"},{text:"南区",active:!1,district:"南区"}],params:null,websocket:null,scroll:0}},activated:function(){this.$refs.aro_page.scrollTop=this.scroll},created:function(){var t=this;this._initWebsocket(),this._getList(this.districtList[0].district),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.aro_page=new re["a"](this.$refs.aro_page,{click:!0})},ToDetail:function(t){var e=this.$refs.aro_page.scrollTop;this.scroll=e,R("order_id",this.askOrderList[t].serial_id),this.$router.push("/riderOrderDetail")},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Y(t.params).then(function(e){t.askOrderList=U(e)}).catch(function(){}),t.$nextTick(function(){t._initScroll()})},500)},_initWebsocket:function(){var t=this,e="ws://101.132.181.245:9501";this.websocket=new WebSocket(e),this.websocket.onopen=function(){P(t.websocket)},this.websocket.onclose=function(){console.log("Disconnected")},this.websocket.onmessage=function(e){var a=JSON.parse(e.data);if("cancel"==a.message){var i=!0,s=!1,n=void 0;try{for(var r,o=pe()(t.askOrderList);!(i=(r=o.next()).done);i=!0){var c=r.value;c["serial_id"]==a.id&&t.askOrderList.splice(t.askOrderList.indexOf(c),1)}}catch(l){s=!0,n=l}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}}else"generate"==a.message&&(a.timestamp=a.time,a.created_at=j(a.time),a.serial_id=a.id,t.askOrderList.unshift(a));console.log("Retrieved data from server: "+a.message)},this.websocket.onerror=function(t){console.log("Error occured: "+t.data)}},ToAccept:function(t){var e=this;_["a"].confirm({message:"确定要接下该单吗？"}).then(function(){_["a"].alert({message:"接单成功"}),e._sendWebsocket(t),e.saveOrder(t),e.askOrderList.splice(t,1)}).catch(function(){})},saveOrder:function(t){var e=$()(this.askOrderList[t]);R("accept_order",e)},_sendWebsocket:function(t){var e=this.askOrderList[t].serial_id,a=JSON.parse(I("rider_info")).phone;this.websocket.send('{"url":"/order/delivery","serial_id":'+e+',"deliveryphone": '+a+"}")},ToActive:function(t,e){this._getList(this.districtList[e].district),t.forEach(function(t){t.active=!1}),t[e].active=!0},_getList:function(t){var e=this;this.params=""==t?{status:"未接单"}:{status:"未接单",district:t},Y(this.params).then(function(t){e.askOrderList=U(t)}).catch(function(){_["a"].alert({message:"获取列表失败"})}),this.isInit=!0},RouteTo:T}},ra=na,oa=(a("f426"),Object(c["a"])(ra,ia,sa,!1,null,"0a4167cb",null)),ca=oa.exports,la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"od_page"},[a("head-top",{staticClass:"od_head",attrs:{goBack:"订单详情"}}),a("section",{staticClass:"od_food"},[a("p",{staticClass:"head"},[t._v("\n                四饭\n            ")]),a("div",{staticClass:"line"}),a("div",{staticClass:"food"},[a("ul",{staticClass:"list"},t._l(t.order_info.foodlist,function(e,i){return a("li",{key:i,staticClass:"item"},[t._m(0,!0),a("div",{staticClass:"content"},[a("div",{staticClass:"l_content"},[a("p",{staticClass:"name"},[t._v("\n                                    "+t._s(e.food)+"\n                                ")]),a("p",{staticClass:"count"},[t._v("\n                                    x"+t._s(t.order_info.numberlist[i])+"\n                                ")])]),a("p",{staticClass:"price"},[t._v("\n                                ￥"+t._s(e.price)+"\n                            ")])])])}),0)]),a("div",{staticClass:"line"}),a("div",{staticClass:"fee"},[a("p",{staticClass:"label"},[t._v("配送费")]),a("p",{staticClass:"number"},[t._v("￥"+t._s(t.order_info.fee))])]),a("div",{staticClass:"line"}),a("div",{staticClass:"total_price"},[t._v("\n                合计 "),a("i",[t._v("￥"+t._s(t.order_info.money))])])]),t.order_info.deliveryphone?a("section",{staticClass:"od_delivery"},[a("p",{staticClass:"head"},[t._v("\n                配送信息\n            ")]),a("div",{staticClass:"line"}),a("div",{staticClass:"rider"},[a("p",{staticClass:"label"},[t._v("\n                    配送云鸽电话\n                ")]),a("p",{staticClass:"name"},[t._v("\n                    "+t._s(t.order_info.deliveryphone)+"\n                ")])]),a("div",{staticClass:"location"},[a("p",{staticClass:"label"},[t._v("\n                    配送地址\n                ")]),a("div",{staticClass:"info"},[a("p",{staticClass:"info"},[t._v("\n                    "+t._s(t.order_info.username)+" "+t._s(t.order_info.userphone)+"\n                    ")]),a("p",{staticClass:"direct"},[t._v("\n                        "+t._s(t.order_info.district+t.order_info.dormtype+t.order_info.building+"栋"+t.order_info.dorm)+"\n                    ")])])])]):t._e(),a("section",{staticClass:"od_order"},[a("p",{staticClass:"head"},[t._v("\n                订单信息\n            ")]),a("div",{staticClass:"line"}),a("div",{staticClass:"id"},[a("p",{staticClass:"label"},[t._v("\n                    订单号码\n                ")]),a("p",{staticClass:"number"},[t._v("\n                    "+t._s(t.order_info.timestamp+""+t.order_info.serial_id)+"\n                ")])]),a("div",{staticClass:"time"},[a("p",{staticClass:"label"},[t._v("\n                    下单时间\n                ")]),a("p",{staticClass:"number"},[t._v("\n                    "+t._s(t.order_info.created_at)+"\n                ")])])])],1)},da=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"img_wrapper"},[i("img",{attrs:{width:"57",height:"57",src:a("76eb"),alt:"food"}})])}],ua={name:"OrderDetail",data:function(){return{order_info:{}}},created:function(){var t=this,e={serial_id:I("order_id")};V(e).then(function(e){e.data.data.timestamp=e.data.data.created_at,e.data.data.created_at=j(e.data.data.created_at),e.data.data.numberlist=JSON.parse(e.data.data.numberlist),t.order_info=e.data.data}).catch(function(){_["a"].alert({message:"获取订单详情失败"})})},components:{headTop:Nt}},fa=ua,ma=(a("23ea"),Object(c["a"])(fa,la,da,!1,null,"010fcaae",null)),pa=ma.exports,ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods"},[a("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[a("ul",t._l(t.goods,function(e,i){return a("li",{key:i,class:i==t.menuIndex?"menu-item-selected":"menu-item",attrs:{"data-stallId":"item.id"},on:{click:function(e){return t.menuClick(i,e)}}},[a("span",{staticClass:"text"},[t._v("\n                "+t._s(e.name)+"\n            ")])])}),0)]),a("div",{ref:"foodsWrapper",staticClass:"foods-wrapper",attrs:{id:"wrapper"}},[a("ul",t._l(t.goods,function(e,i){return a("li",{key:i,staticClass:"food-list food-list-hook"},[a("h1",[t._v(t._s(e.name))]),a("ul",t._l(e.recipe,function(e,i){return a("li",{key:i,staticClass:"food-item",attrs:{"data-id":"food.id"}},[t._m(0,!0),a("div",{staticClass:"content"},[a("h2",[t._v(t._s(e.food))]),a("div",{staticClass:"price"},[a("span",{staticClass:"newPrice"},[a("span",{staticClass:"unit"},[t._v("￥")]),t._v("\n                                    "+t._s(e.price)+"\n                                ")])]),a("div",{staticClass:"cartcontrol-wrapper"},[a("cartcontrol",{attrs:{food:e}})],1)])])}),0)])}),0)]),a("shopCart",{attrs:{minPrice:t.minPrice,selectFoods:t.selectFoods}})],1)},va=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("76eb"),alt:"food_icon",width:"57",height:"57"}})])}],_a=a("75fc"),ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"shopCart"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-left",on:{click:t.listToggle}},[a("div",{staticClass:"logo-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}],staticClass:"badge"},[t._v("\n                        "+t._s(t.totalCount)+"\n                    ")]),a("div",{staticClass:"logo",class:{active:t.totalPrice}},[a("i",{staticClass:"iconfont icon-shopcart"})])]),a("div",{staticClass:"price",class:{active:t.totalPrice}},[t._v("\n                    ￥"+t._s(t.totalPrice)+"\n                ")]),a("div",{staticClass:"desc"},[t._v("\n                    另需要配送费￥"+t._s(t.deliveryPrice)+"元\n                ")])]),a("div",{staticClass:"content-right",class:{enough:t.totalPrice>=t.minPrice},on:{click:t.ToPurchase}},[t._v("\n                "+t._s(t.payDesc)+"\n            ")])]),a("div",{staticClass:"ball-container"},t._l(t.balls,function(e,i){return a("transition",{key:i,attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[a("div",{staticClass:"inner inner-hook"})])])}),1),a("transition",{attrs:{name:"transHeight"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[a("div",{staticClass:"list-header"},[a("h1",{staticClass:"title"},[t._v("购物车")]),a("span",{staticClass:"empty",on:{click:function(e){return t.setEmpty()}}},[t._v("清空")])]),a("div",{ref:"foodlist",staticClass:"list-content"},[a("ul",t._l(t.selectFoods,function(e,i){return a("li",{key:i,staticClass:"food"},[a("span",{staticClass:"name"},[t._v(t._s(e.food))]),a("div",{staticClass:"price"},[a("span",[t._v("￥"+t._s(e.price*e.count))])]),a("div",{staticClass:"cartcontrol-wrapper"},[a("cartcontrol",{attrs:{food:e}})],1)])}),0)])])])],1),a("transition",{attrs:{name:"fade-backdrop"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showBackdrop,expression:"showBackdrop"}],staticClass:"backdrop",on:{click:t.hideBackdrop}})])],1)},Ca=[],ba=(a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cartcontrol"},[a("transition",{attrs:{name:"fadeRotate"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"cart-decrease",on:{click:function(e){return t.decreaseCart()}}},[a("span",{staticClass:"iconfont icon-decrease inner"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"cart-count"},[t._v("\n        "+t._s(t.food.count)+"\n    ")]),a("div",{staticClass:"cart-add",on:{click:function(e){return t.addCart(e)}}},[a("i",{staticClass:"iconfont icon-add"})])],1)}),wa=[],xa={name:"cartcontrol",props:{food:Object},methods:{addCart:function(t){t._constructed&&(this.food.count||i["a"].set(this.food,"count",0),this.food.count++,this.$root.eventHub.$emit("cart.add",t.target))},decreaseCart:function(){this.food.count--}}},ka=xa,La=(a("6bc0"),a("8d6b"),Object(c["a"])(ka,ba,wa,!1,null,"fc3e82ce",null)),$a=La.exports,Oa={props:{selectFoods:{type:Array,default:function(){return[]}},minPrice:{type:Number,default:0}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],listShow:!1}},created:function(){this.$root.eventHub.$on("cart.add",this.drop)},computed:{showBackdrop:function(){return!(!this.listShow||!this.totalPrice)},totalPrice:function(){var t=0;return this.selectFoods.forEach(function(e){e.count&&(t+=e.price*e.count)}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.count}),t},leftAmount:function(){return!!(this.minPrice-this.totalPrice>0&&this.totalPrice)},payDesc:function(){var t=this.minPrice-this.totalPrice;return this.totalPrice?t>0?"还差￥".concat(t,"元"):"去结算":"￥".concat(this.totalPrice,"起送")},deliveryPrice:function(){var t=JSON.parse(I("user_info")).district,e={"西区":2.5,"南区":2,"北区":1.5};return this.totalPrice<=13?e[t]:this.totalPrice>13&&this.totalPrice<=25?2*e[t]:6}},watch:{selectFoods:function(){var t=!1;this.selectFoods.forEach(function(e){1===e.count&&(t=!0)}),t||(this.listShow=!1)}},methods:{drop:function(t){for(var e=0,a=this.balls.length;e<a;e++){var i=this.balls[e];if(!i.show)return i.show=!0,i.el=t,void this.dropBalls.push(i)}},setEmpty:function(){this.selectFoods.forEach(function(t){t.count=0}),this.listShow=!1},hideBackdrop:function(){this.listShow=!1},_initScroll:function(){this.foodlistScroll=new re["a"](this.$refs.foodlist,{click:!0})},listToggle:function(){var t=this;this.selectFoods.length&&(this.listShow=!this.listShow,this.listShow&&this.$nextTick(function(){t.foodlistScroll?t.foodlistScroll.refresh():t._initScroll()}))},beforeEnter:function(t){var e=this.balls.length;while(e--){var a=this.balls[e];if(a.show){var i=a.el.getBoundingClientRect(),s=i.left-32,n=-(window.innerHeight-i.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,".concat(n,"px,0)"),t.style.transform="translate3d(0,".concat(n,"px,0)");var r=t.querySelector(".inner-hook");r.style.webkitTransform="translate3d(".concat(s,"px,0,0)"),r.style.transform="translate3d(".concat(s,"px,0,0)")}}},enter:function(t){t.offsetHeight,this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.querySelector(".inner-hook");e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)"})},afterEnter:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")},ToPurchase:function(){var t=this;this.totalPrice<this.minPrice||_["a"].confirm({title:"订单金额",message:"你总共需要支付".concat(this.totalPrice+this.deliveryPrice,"元,确认下单吗？")}).then(function(){var e=[],a=[];t.selectFoods.forEach(function(t){t.count&&(e.push(t.count),a.push(t.id))});var i=JSON.parse(I("user_info")),s=new FormData;s.append("foodlist",$()(a)),s.append("numberlist",$()(e)),s.append("money",t.totalPrice),s.append("district",i.district),s.append("dormtype",i.dormtype),s.append("building",i.building),s.append("dorm",i.dorm),s.append("userphone",i.phone),s.append("fee",t.deliveryPrice),K(s).then(function(e){var a=e.data.data;console.log(e),console.log(a.jsApiParameters),console.log(a.out_trade_no),t.callpay(a.jsApiParameters,a.out_trade_no)}).catch(function(){_["a"].alert({message:"下单失败"})})}).catch(function(){})},jsApiCall:function(t,e){var a=this;WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(){var t={out_trade_no:e};z(t).then(function(t){console.log(t),_["a"].alert({message:"下单成功"}),a.$router.push("/order")}).catch(function(t){console.log(t)})})},callpay:function(t,e){"undefined"===typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.jsApiCall(t,e),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.jsApiCall(t,e)),document.attachEvent("onWeixinJSBridgeReady",this.jsApiCall(t,e))):this.jsApiCall(t,e)}},components:{cartcontrol:$a}},ya=Oa,Ta=(a("04da"),a("68dc"),Object(c["a"])(ya,ga,Ca,!1,null,"1a87a3cf",null)),Sa=Ta.exports,Ea={name:"Goods",data:function(){return{goods:[],listHeight:[],foodsScrollY:0,selectedFood:"",minPrice:3}},created:function(){var t=this;JSON.parse(I("good_list"))?(this.goods=Object(_a["a"])(JSON.parse(I("good_list"))),this.$nextTick(function(){t._initScroll(),t._calculateHeight()})):X().then(function(e){t.goods=Object(_a["a"])(e.data.data),R("good_list",$()(t.goods)),t.$nextTick(function(){t._initScroll(),t._calculateHeight()})}).catch(function(){_["a"].alert({message:"获取列表失败"})})},computed:{menuIndex:function(){for(var t=0,e=this.listHeight.length;t<e;t++){var a=this.listHeight[t],i=this.listHeight[t+1];if(!i||this.foodsScrollY>=a&&this.foodsScrollY<i)return t}return 0},selectFoods:function(){var t=[];return this.goods.forEach(function(e){e.recipe.forEach(function(e){e.count&&t.push(e)})}),t}},methods:{_initScroll:function(){var t=this;this.menuWrapper=new re["a"](this.$refs.menuWrapper,{click:!0}),this.foodsScroll=new re["a"](this.$refs.foodsWrapper,{click:!0,probeType:3}),this.foodsScroll.on("scroll",function(e){t.foodsScrollY=Math.abs(Math.round(e.y))})},_calculateHeight:function(){var t=this.$refs.foodsWrapper.querySelectorAll(".food-list-hook"),e=0;this.listHeight.push(e);for(var a=0,i=t.length;a<i;a++){var s=t[a];e+=s.clientHeight,this.listHeight.push(e)}},menuClick:function(t,e){e._constructed&&(this.menuIndex=t,this.foodsScroll.scrollTo(0,-this.listHeight[t],300))}},components:{shopCart:Sa,cartcontrol:$a}},Ra=Ea,Ia=(a("25db"),Object(c["a"])(Ra,ha,va,!1,null,"3997932f",null)),Aa=Ia.exports,ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("head-top",{attrs:{goBack:"帮助与反馈"}}),a("textarea",{staticClass:"content",attrs:{placeholder:"say something~",rows:"3"}}),a("input",{staticClass:"btn",attrs:{type:"button",value:"提交"}})],1)},Na=[],Pa={name:"Help",methods:{},components:{headTop:Nt}},Da=Pa,Wa=(a("adc3"),Object(c["a"])(Da,ja,Na,!1,null,"45518470",null)),Fa=Wa.exports,Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c_page"},[a("head-top",{attrs:{goBack:" "}}),t._m(0),a("h2",{staticClass:"c_name"},[t._v("云鸽校园")]),t._m(1),t._m(2)],1)},Ua=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"c_logo"},[i("img",{attrs:{src:a("a346"),alt:"logo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"c_text"},[t._v("联系邮箱："),a("span",[t._v("Ygxyfwtd@126.com")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"c_text"},[t._v("微信："),a("span",[t._v("Skr_003")])])}],Ba={name:"Contact",components:{headTop:Nt}},Ha=Ba,Ya=(a("90a9"),Object(c["a"])(Ha,Ja,Ua,!1,null,"5ffb996c",null)),qa=Ya.exports,Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n    pay\n")])},Ma=[],Ka={name:"Pay"},Ga=Ka,Qa=Object(c["a"])(Ga,Va,Ma,!1,null,"b3718c5a",null),Xa=Qa.exports;i["a"].use(u["a"]);var za=new u["a"]({routes:[{path:"/",redirect:"/index"},{path:"/index",component:at},{path:"/riderRegist",component:lt},{path:"/studentRegist",component:ht},{path:"/riderLogin",component:wt},{path:"/studentLogin",component:wt},{path:"/home",component:Ft},{path:"/order",component:qt,redirect:"/askOrder",children:[{path:"/waitOrder",component:de,meta:{keepAlive:!0}},{path:"/askOrder",component:ge,meta:{keepAlive:!0}},{path:"/cancelOrder",component:Le,meta:{keepAlive:!0}},{path:"/finishOrder",component:Ee,meta:{keepAlive:!0}}]},{path:"/my",component:Xt},{path:"/shop",component:ie,redirect:"/goods",meta:{keepAlive:!0},children:[{path:"/goods",component:Aa}]},{path:"/modifyLocation",component:We},{path:"/riderOrder",component:Ye,redirect:"/askRiderOrder",children:[{path:"/waitRiderOrder",component:Qe,meta:{keepAlive:!0}},{path:"/askRiderOrder",component:ca,meta:{keepAlive:!0}},{path:"/pastRiderOrder",component:aa,meta:{keepAlive:!0}}]},{path:"/orderDetail",component:pa},{path:"/help",component:Fa},{path:"/contact",component:qa},{path:"/riderOrderDetail",component:pa},{path:"/pay",component:Xa}]}),Za={record_orderId:function(t,e){t.order_id=e,R("order_id",e)}},ti=a("4b76"),ei=a.n(ti),ai=a("94d5"),ii=a.n(ai);i["a"].use(f["a"]);var si={order_id:""},ni=new f["a"].Store({state:si,getters:ii.a,actions:ei.a,mutations:Za}),ri=a("1dce"),oi=a.n(ri);a("157a"),a("31bb");i["a"].config.productionTip=!1,C.a.defaults.withCredentials=!0,C.a.defaults.baseURL="http://dtygfw.top/","addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){p.a.attach(document.body)},!1),i["a"].use(u["a"]),i["a"].use(f["a"]),i["a"].use(_["d"]),i["a"].use(w.a,C.a),i["a"].use(oi.a),i["a"].use(v.a,{preload:1.3,attempt:1}),new i["a"]({render:function(t){return t(d)},router:za,store:ni,data:{eventHub:new i["a"]}}).$mount("#app")},"5c3d":function(t,e,a){"use strict";var i=a("e644"),s=a.n(i);s.a},"610c":function(t,e,a){t.exports=a.p+"img/swiper_3.fe17c8ee.jpg"},"63eb":function(t,e,a){"use strict";var i=a("9521"),s=a.n(i);s.a},"68dc":function(t,e,a){"use strict";var i=a("d79f"),s=a.n(i);s.a},"6bb5":function(t,e,a){"use strict";var i=a("39c8"),s=a.n(i);s.a},"6bc0":function(t,e,a){"use strict";var i=a("ba7c"),s=a.n(i);s.a},"6e24":function(t,e,a){"use strict";var i=a("1319"),s=a.n(i);s.a},"70fc":function(t,e,a){},"72b7":function(t,e,a){"use strict";var i=a("fb4f"),s=a.n(i);s.a},"76eb":function(t,e,a){t.exports=a.p+"img/fourth.d13e6b7f.jpg"},"780d":function(t,e,a){},"7b76":function(t,e,a){"use strict";var i=a("7b7f"),s=a.n(i);s.a},"7b7f":function(t,e,a){},"822d":function(t,e,a){},"850d":function(t,e,a){"use strict";var i=a("822d"),s=a.n(i);s.a},8822:function(t,e,a){},"8b3a":function(t,e,a){t.exports=a.p+"img/swiper_5.a167f52f.jpg"},"8d6b":function(t,e,a){"use strict";var i=a("38f1"),s=a.n(i);s.a},"90a9":function(t,e,a){"use strict";var i=a("c097"),s=a.n(i);s.a},"94d5":function(t,e){},9521:function(t,e,a){},"99f9":function(t,e,a){},"9d39":function(t,e,a){},"9e4c":function(t,e,a){},a346:function(t,e){t.exports="data:image/png;base64,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"},a7f3:function(t,e,a){t.exports=a.p+"img/swiper_4.efdade0d.jpg"},a86d:function(t,e,a){"use strict";var i=a("0757"),s=a.n(i);s.a},adc3:function(t,e,a){"use strict";var i=a("70fc"),s=a.n(i);s.a},b2a3:function(t,e,a){t.exports=a.p+"img/index.d457ee5f.svg"},b41a:function(t,e,a){},b737:function(t,e,a){"use strict";var i=a("1e6c"),s=a.n(i);s.a},b8f1:function(t,e,a){"use strict";var i=a("b41a"),s=a.n(i);s.a},b933:function(t,e,a){},ba7c:function(t,e,a){},c097:function(t,e,a){},c1a1:function(t,e,a){t.exports=a.p+"img/food.6afd05f4.svg"},c358:function(t,e,a){},c76c:function(t,e,a){},cc32:function(t,e,a){"use strict";var i=a("c358"),s=a.n(i);s.a},cf58:function(t,e,a){},d14d:function(t,e,a){t.exports=a.p+"img/up_door.98803ab7.svg"},d784:function(t,e,a){"use strict";var i=a("9d39"),s=a.n(i);s.a},d79f:function(t,e,a){},d7db:function(t,e,a){t.exports=a.p+"img/head.ff86e3ae.jpg"},d8ef:function(t,e,a){"use strict";var i=a("b933"),s=a.n(i);s.a},da26:function(t,e,a){t.exports=a.p+"img/rider.1e9d447e.svg"},e2ab:function(t,e,a){"use strict";var i=a("780d"),s=a.n(i);s.a},e644:function(t,e,a){},ebb4:function(t,e,a){"use strict";var i=a("3164"),s=a.n(i);s.a},f426:function(t,e,a){"use strict";var i=a("cf58"),s=a.n(i);s.a},f8f9:function(t,e,a){t.exports=a.p+"img/student.3c5ba8fa.svg"},fb4f:function(t,e,a){}});
//# sourceMappingURL=app.64e9d343.js.map