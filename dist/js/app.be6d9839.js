(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],u=0,f=[];u<o.length;u++)r=o[u],i[r]&&f.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"01f0":function(t,e,a){"use strict";var s=a("1235"),i=a.n(s);i.a},"0596":function(t,e,a){"use strict";var s=a("9de0"),i=a.n(s);i.a},"0aae":function(t,e,a){"use strict";var s=a("cd85"),i=a.n(s);i.a},"0c8c":function(t,e,a){},1235:function(t,e,a){},"16f9":function(t,e,a){},"1db8":function(t,e,a){},"1e54":function(t,e,a){"use strict";var s=a("93df"),i=a.n(s);i.a},"22cc":function(t,e,a){},"241f":function(t,e,a){"use strict";var s=a("0c8c"),i=a.n(s);i.a},"2a34":function(t,e,a){t.exports=a.p+"img/swiper_2.d2e49bac.jpg"},"2ba7":function(t,e,a){"use strict";var s=a("69cc"),i=a.n(s);i.a},"2bee":function(t,e,a){"use strict";var s=a("a605"),i=a.n(s);i.a},"2c07":function(t,e,a){"use strict";var s=a("ffe5"),i=a.n(s);i.a},"2f7a":function(t,e,a){t.exports=a.p+"img/swiper_1.36744450.jpg"},"31bb":function(t,e,a){},"38f1":function(t,e,a){},"41ee":function(t,e,a){},4346:function(t,e,a){"use strict";var s=a("e688"),i=a.n(s);i.a},"4b76":function(t,e){},"52c9":function(t,e,a){},"56c4":function(t,e,a){"use strict";var s=a("92ea"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"router-fade",mode:"out-in"}},[a("keep-alive",[t.$route.meta.keepAlive?a("router-view"):t._e()],1)],1),a("transition",{attrs:{name:"router-fade",mode:"out-in"}},[t.$route.meta.keepAlive?t._e():a("router-view")],1)],1)},n=[],r={name:"app"},o=r,c=(a("01f0"),a("2877")),l=Object(c["a"])(o,i,n,!1,null,"5ef3694a",null),d=l.exports,u=a("8c4f"),f=a("2f62"),m=a("fe3c"),p=a.n(m),h=a("283e"),v=a.n(h),_=a("b970"),g=a("bc3a"),C=a.n(g),b=a("a7fe"),w=a.n(b),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index_page"},[s("transition",{attrs:{name:"index_head-fade",mode:"in-out"}},[s("header",{directives:[{name:"show",rawName:"v-show",value:t.showIndex,expression:"showIndex"}],staticClass:"index_head"},[s("div",{staticClass:"logo_wrapper"},[s("img",{staticClass:"index_logo margin",attrs:{src:a("a346"),alt:"logo"}})]),s("h1",[t._v("CLOUD PIGEON")])])]),s("transition",{attrs:{name:"index_content-fade",mode:"in-out"}},[s("section",{directives:[{name:"show",rawName:"v-show",value:t.showIndex,expression:"showIndex"}],staticClass:"index_content"},[s("div",{staticClass:"rider",on:{click:t.getRider}},[s("div",{staticClass:"rider_head"},[s("img",{attrs:{src:a("da26"),alt:"Rider"}})]),s("p",[t._v("云鸽")])]),s("p",{staticClass:"index_or"},[t._v("or")]),s("div",{staticClass:"student",on:{click:t.getStudent}},[s("div",{staticClass:"student_head"},[s("img",{attrs:{src:a("f8f9"),alt:"student"}})]),s("p",[t._v("学生")])])])])],1)},k=[],L=a("f499"),$=a.n(L),O=a("a745"),y=a.n(O);function T(t){this.$router.push(t)}function S(t,e){localStorage.setItem(t,e)}function E(t){return localStorage.getItem(t)}function R(t,e){sessionStorage.setItem(t,e)}function I(t){return sessionStorage.getItem(t)}function A(t){return y()(t)&&0===t.length}function j(t){var e=new Date(1e3*t),a=e.getFullYear()+"-",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",i=e.getDate()+"  ",n=e.getHours()+":",r=e.getMinutes()+":",o=e.getSeconds();return a+s+i+n+r+o}function N(t){var e=new Date(1e3*t),a=e.getMinutes()+30,s=e.getHours();a>60&&(a-=60,s+=1);var i=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",r=e.getDate()+"  ",o=s+":",c=a+":",l=e.getSeconds();return i+n+r+o+c+l}function P(t){var e=new FormData,a=t;for(var s in a)e.append(s,a[s]);return e}function D(t,e){return 1e14+e+""+t}var W={name:"Index",data:function(){return{showIndex:!1}},mounted:function(){this.showIndex=!0},methods:{getRider:function(){var t=this;if(E("rider_token")){var e=new FormData;e.append("role","delivery"),e.append("token",E("rider_token")),this.axios.post("/login",e).then(function(e){var a=e.data.data;R("rider_info",$()(a)),A(JSON.parse(I("rider_info")))?(_["a"].alert({message:"账号已过期，请重新登录"}),t.$router.push("/riderLogin")):t.$router.push("/riderOrder")}).catch(function(){_["a"].alert({message:"账号已过期，请重新登录"})})}else _["a"].alert({message:"请先注册账号"}),this.$router.push("/riderRegist")},getStudent:function(){var t=this;if(E("user_token")){var e=new FormData;e.append("role","user"),e.append("token",E("user_token")),this.axios.post("/login",e).then(function(e){var a=e.data.data;R("user_info",$()(a)),A(JSON.parse(I("user_info")))?(_["a"].alert({message:"账号已过期，请重新登录"}),t.$router.push("/studentLogin")):t.$router.push("/home")}).catch(function(){_["a"].alert({message:"账号已过期，请重新登录"})})}else _["a"].alert({message:"请先注册账号"}),this.$router.push("/studentRegist")}}},F=W,U=(a("a064"),Object(c["a"])(F,x,k,!1,null,"6bf0be08",null)),J=U.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rg_page"},[s("router-link",{staticClass:"rg_back",attrs:{to:"/index",tag:"div"}},[s("img",{attrs:{src:a("b2a3"),alt:"index"}})]),s("transition",{attrs:{name:"rg-fade",mode:"in-out"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showRegist,expression:"showRegist"}],staticClass:"rg_box"},[s("header",{staticClass:"rg_head"},[s("div",{staticClass:"logo_wrapper"},[s("img",{attrs:{src:a("a346"),alt:"logo"}})])]),s("section",{staticClass:"rg_form"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.name.$model,expression:"$v.formdata.name.$model",modifiers:{trim:!0}}],staticClass:"rg_name",attrs:{type:"text",placeholder:"请输入姓名"},domProps:{value:t.$v.formdata.name.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.name,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.name.required?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 必须输入姓名\n                ")]),t.$v.formdata.name.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入真实姓名\n                ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.sid.$model,expression:"$v.formdata.sid.$model",modifiers:{trim:!0}}],staticClass:"rg_studentNum",attrs:{type:"text",placeholder:"请输入学号"},domProps:{value:t.$v.formdata.sid.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.sid,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.sid.required?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 必须输入学号\n                ")]),t.$v.formdata.sid.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 学号为10位\n                ")]),t.$v.formdata.sid.maxLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 学号为10位\n                ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.phone.$model,expression:"$v.formdata.phone.$model",modifiers:{trim:!0}}],staticClass:"rg_phone",attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:t.$v.formdata.phone.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.phone,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.phone.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),t.$v.formdata.phone.maxLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.password.$model,expression:"$v.formdata.password.$model",modifiers:{trim:!0}}],staticClass:"rg_name",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.$v.formdata.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.password.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 密码不能少于6位\n                ")]),s("input",{staticClass:"rg_registBtn",attrs:{type:"button",value:"注册"},on:{click:t.ToRegist}}),s("router-link",{staticClass:"rg_login",attrs:{to:"/riderLogin",tag:"div"}},[t._v("\n                    Sign In\n                ")])],1)])])],1)},H=[],Y=a("b5ae"),q={name:"RiderRegist",data:function(){return{formdata:{name:"",phone:"",password:"",sid:"",role:"delivery"},showRegist:!1}},validations:{formdata:{name:{required:Y["required"],minLength:Object(Y["minLength"])(2)},sid:{required:Y["required"],minLength:Object(Y["minLength"])(10),maxLength:Object(Y["maxLength"])(10)},phone:{minLength:Object(Y["minLength"])(11),maxLength:Object(Y["maxLength"])(11),numeric:Y["numeric"]},password:{minLength:Object(Y["minLength"])(6)}}},mounted:function(){this.showRegist=!0},methods:{ToRegist:function(){var t=this;this.$v.$invalid?this.ToRemind("请正确填写信息"):this.axios.post("/register",P(this.formdata)).then(function(e){t.getRes(e)}).catch(function(){t.getFail()})},getRes:function(t){var e=t.data.code;0!==e?_["a"].alert({message:"该手机号已被注册"}):this.getSuc()},getSuc:function(){this.ToRemind("注册成功,请耐心等待后台审核"),this.$router.push("/index")},getFail:function(){this.ToRemind("注册失败，请重新注册")},ToRemind:function(t){_["a"].alert({message:t})}}},V=q,M=(a("6705"),Object(c["a"])(V,B,H,!1,null,"54bb6358",null)),K=M.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sg_page"},[s("router-link",{staticClass:"sg_back",attrs:{to:"/index",tag:"div"}},[s("img",{attrs:{src:a("b2a3"),alt:"index"}})]),s("transition",{attrs:{name:"rg-fade",mode:"in-out"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showRegist,expression:"showRegist"}],staticClass:"sg_box"},[s("header",{staticClass:"sg_head"},[s("div",{staticClass:"logo_wrapper"},[s("img",{attrs:{src:a("a346"),alt:"logo"}})])]),s("section",{staticClass:"sg_form"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.name.$model,expression:"$v.formdata.name.$model",modifiers:{trim:!0}}],staticClass:"sg_name",attrs:{autofocus:"",type:"text",placeholder:"请输入姓名"},domProps:{value:t.$v.formdata.name.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.name,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.name.required?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 必须输入姓名\n                ")]),t.$v.formdata.name.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入真实姓名\n                ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.phone.$model,expression:"$v.formdata.phone.$model",modifiers:{trim:!0}}],staticClass:"sg_phone",attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:t.$v.formdata.phone.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.phone,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.phone.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),t.$v.formdata.phone.maxLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.password.$model,expression:"$v.formdata.password.$model",modifiers:{trim:!0}}],staticClass:"sg_name",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.$v.formdata.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.password.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 密码不能少于6位\n                ")]),s("div",{staticClass:"sg_location"},[s("label",[t._v("配送地址:")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.building.$model,expression:"$v.formdata.building.$model",modifiers:{trim:!0}}],staticClass:"sg_building",attrs:{min:"7",max:"48",type:"text",placeholder:"XX"},domProps:{value:t.$v.formdata.building.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.building,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",[t._v("栋")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.dorm.$model,expression:"$v.formdata.dorm.$model",modifiers:{trim:!0}}],staticClass:"sg_dormitory",attrs:{type:"text",placeholder:"宿舍号"},domProps:{value:t.$v.formdata.dorm.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.dorm,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t.$v.formdata.building.required?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 必须填写地址\n                ")]),t.$v.formdata.building.minValue?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确地址\n                ")]),t.$v.formdata.building.maxValue?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确地址\n                ")]),t.$v.formdata.dorm.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确地址\n                ")]),t.$v.formdata.dorm.maxLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确地址\n                ")]),s("input",{staticClass:"sg_registBtn",attrs:{type:"submit",value:"注册"},on:{click:t.ToRegist}}),s("router-link",{staticClass:"sg_login",attrs:{to:"/studentLogin",tag:"div"}},[t._v("\n                    Sign In\n                ")])],1)])])],1)},Q=[],X={name:"StudentRegist",data:function(){return{formdata:{name:"",phone:"",password:"",studentName:"",role:"user",building:"",dorm:""},showRegist:!1}},validations:{formdata:{name:{required:Y["required"],minLength:Object(Y["minLength"])(2)},phone:{minLength:Object(Y["minLength"])(11),maxLength:Object(Y["maxLength"])(11),numeric:Y["numeric"]},password:{minLength:Object(Y["minLength"])(6)},building:{required:Y["required"],minValue:Object(Y["minValue"])(7),maxValue:Object(Y["maxValue"])(48)},dorm:{required:Y["required"],minLength:3,maxLength:3,numeric:Y["numeric"]}}},mounted:function(){this.showRegist=!0},methods:{ToRegist:function(){var t=this;this.$v.$invalid?this.ToRemind("请正确填写信息"):this.axios.post("/register",P(this.formdata)).then(function(e){t.getRes(e)}).catch(function(){t.getFail()})},getRes:function(t){var e=t.data.code;0!==e?_["a"].alert({message:"该手机号已被注册"}):this.getSuc(t)},getSuc:function(t){var e=t.data.data;this.ToRemind("注册成功"),S("user_token",e.token),this.ToLogin()},getFail:function(){this.ToRemind("注册失败，请重新注册")},ToRemind:function(t){_["a"].alert({message:t})},ToLogin:function(){var t=this,e=new FormData;e.append("token",E("user_token")),e.append("role",this.formdata.role),this.axios.post("/login",e).then(function(e){var a=e.data.data;R("user_info",$()(a)),t.$router.push("/home")})}}},z=X,Z=(a("75cf"),Object(c["a"])(z,G,Q,!1,null,"5dcd8be5",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l_page"},[s("router-link",{staticClass:"l_back",attrs:{to:"/index",tag:"div"}},[s("img",{attrs:{src:a("b2a3"),alt:"index"}})]),s("transition",{attrs:{name:"rl-fade",mode:"in-out"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showLogin,expression:"showLogin"}],staticClass:"l_box"},[s("header",{staticClass:"l_head"},[s("div",{staticClass:"logo_wrapper"},[s("img",{attrs:{src:a("a346"),alt:"logo"}})])]),s("section",{staticClass:"l_form"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.phone.$model,expression:"$v.formdata.phone.$model",modifiers:{trim:!0}}],staticClass:"l_phone",attrs:{autofocus:"",type:"text",placeholder:"请输入手机号"},domProps:{value:t.$v.formdata.phone.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.phone,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.phone.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),t.$v.formdata.phone.numeric?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 请输入正确的手机号码\n                ")]),t.$v.formdata.phone.maxLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 手机号为11位\n                ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.formdata.password.$model,expression:"$v.formdata.password.$model",modifiers:{trim:!0}}],staticClass:"l_name",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.$v.formdata.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.formdata.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.formdata.password.minLength?t._e():s("span",{staticClass:"form-group_message"},[t._v("\n                * 密码不能少于6位\n                ")]),s("input",{staticClass:"l_loginBtn",attrs:{type:"button",value:"登录"},on:{click:t.ToLogin}}),"user"===t.formdata.role?s("router-link",{staticClass:"l_regist",attrs:{to:"/studentRegist",tag:"div"}},[t._v("\n                    Sign Up\n                ")]):s("router-link",{ref:"signUp",staticClass:"l_regist",attrs:{to:"/riderRegist",tag:"div"}},[t._v("\n                    Sign Up\n                ")])],1)])])],1)},at=[],st=(a("28a5"),{name:"StudentLogin",data:function(){return{formdata:{role:"user",phone:"",password:""},path:"/home",showLogin:!1}},validations:{formdata:{phone:{minLength:Object(Y["minLength"])(11),maxLength:Object(Y["maxLength"])(11),numeric:Y["numeric"],required:Y["required"]},password:{minLength:Object(Y["minLength"])(6),required:Y["required"]}}},created:function(){"studentLogin"!==this.$route.path.split("/")[1]&&(this.formdata.role="delivery",this.path="/riderOrder")},mounted:function(){this.showLogin=!0},methods:{ToLogin:function(){var t=this;this.$v.$invalid?_["a"].alert({message:"请正确填写账号密码"}):this.axios.post("/login",P(this.formdata)).then(function(e){t.getRes(e)}).catch(function(){t.getFail()})},getRes:function(t){var e=t.data.code;0!==e?_["a"].alert({message:"账号或密码有误"}):this.getSuc(t)},getSuc:function(t){var e=t.data.data;this.getStore(e),_["a"].alert({message:"登录成功"}),this.$router.push(this.path)},getFail:function(){_["a"].alert({message:"登录失败"})},getStore:function(t){"user"===this.formdata.role?(R("user_info",$()(t)),S("user_token",t.token)):(R("rider_info",$()(t)),S("rider_token",t.token))}}}),it=st,nt=(a("667d"),Object(c["a"])(it,et,at,!1,null,"7ab3db20",null)),rt=nt.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_page"},[s("head-top",{attrs:{home:t.area}}),s("van-swipe",{staticClass:"h_swiper",attrs:{autoplay:3e3}},[s("van-swipe-item",[s("img",{attrs:{src:a("2f7a")}})]),s("van-swipe-item",[s("img",{attrs:{src:a("2a34")}})])],1),s("section",{staticClass:"h_content"},[s("router-link",{staticClass:"h_fourth",attrs:{to:"/shop",tag:"div"}},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("c1a1"),alt:"food"}})]),s("p",[t._v("第四食堂")])])],1),s("footer-bottom",{attrs:{currentIndex:0}})],1)},ct=[],lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"f_page"},t._l(t.arr,function(e,s){return a("div",{key:s,staticClass:"f_item home",class:{active:t.currentIndex===s},on:{click:function(a){t.ToActive(s),t.LinkTo(e.path)}}},[a("i",{class:e.icon_class}),a("p",[t._v(t._s(e.text))])])}),0)},dt=[],ut={name:"footerBottom",data:function(){return{arr:[{icon_class:"iconfont icon-home",text:"首页",path:"/home"},{icon_class:"iconfont icon-order",text:"订单",path:"/order"},{icon_class:"iconfont icon-my",text:"我的",path:"/my"}]}},props:["currentIndex"],methods:{ToActive:function(t){this.currentIndex=t},LinkTo:function(t){this.$router.push(t)}}},ft=ut,mt=(a("5942"),a("dbb9"),Object(c["a"])(ft,lt,dt,!1,null,"ea05ab5c",null)),pt=mt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"head"},[t._t("exit"),t.center?a("section",{staticClass:"head_center"},[t._v("\n        "+t._s(t.center)+"\n    ")]):t._e(),t.goBack?a("section",{staticClass:"head_goBack",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"iconfont icon-l_arrow"}),a("p",[t._v(t._s(t.goBack))])]):t._e(),t.home?a("section",{staticClass:"head_home"},[t._m(0),a("div",{staticClass:"h_location"},[a("p",[t._v(t._s(t.home))])])]):t._e()],2)},vt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_img"},[s("img",{attrs:{src:a("d7db"),alt:"head"}})])}],_t={name:"Header",props:["home","goBack","center"]},gt=_t,Ct=(a("5c3d"),Object(c["a"])(gt,ht,vt,!1,null,"7b374e78",null)),bt=Ct.exports,wt={name:"Home",data:function(){return{area:"未选定"}},mounted:function(){this.area=JSON.parse(I("user_info")).district},components:{footerBottom:pt,headTop:bt}},xt=wt,kt=(a("66a4"),Object(c["a"])(xt,ot,ct,!1,null,"f2da362e",null)),Lt=kt.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"o_page"},[a("head-top",{attrs:{center:"我的订单"}}),a("div",{staticClass:"o_tab"},t._l(t.tabList,function(e,s){return a("div",{key:s,staticClass:"o_tab-item",on:{click:function(e){return t.ToActive(s)}}},[a("router-link",{class:{active:e.active},attrs:{to:e.path}},[t._v(t._s(e.text))])],1)}),0),a("keep-alive",[a("router-view")],1),a("footer-bottom",{attrs:{currentIndex:1}})],1)},Ot=[],yt=(a("ac6a"),{name:"Order",data:function(){return{orderList:[],tabList:[{path:"/askOrder",text:"未接单",active:!0},{path:"/waitOrder",text:"已接单",active:!1},{path:"/cancelOrder",text:"已取消",active:!1},{path:"/finishOrder",text:"已完成",active:!1}]}},methods:{ToActive:function(t){this.tabList.forEach(function(t){t.active=!1}),this.tabList[t].active=!0}},components:{footerBottom:pt,headTop:bt}}),Tt=yt,St=(a("8aea"),Object(c["a"])(Tt,$t,Ot,!1,null,"2b660f7d",null)),Et=St.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m_page"},[a("header",{staticClass:"m_head"},[t._v("\n        我的云鸽\n    ")]),a("section",{staticClass:"m_info"},[t._m(0),a("div",{staticClass:"content"},[a("p",{staticClass:"userName"},[t._v(t._s(t.userName))]),t._m(1)])]),a("ul",{staticClass:"m_list"},t._l(t.myList,function(e,s){return a("li",{key:s,staticClass:"m_item",on:{click:function(e){return t.ToSetting(s)}}},[a("i",{class:e.class}),t._v("\n            "+t._s(e.text)+"\n        ")])}),0),a("footer-bottom",{attrs:{currentIndex:2}})],1)},It=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("d7db"),alt:"user_head"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userInfo"},[t._v("\n            个人信息\n            "),a("i",{staticClass:"iconfont icon-r_arrow"})])}],At=(a("7f7f"),{name:"My",data:function(){return{myList:[{class:"iconfont icon-location",text:"配送地修改"},{class:"iconfont icon-help",text:"帮助与反馈"},{class:"iconfont icon-service",text:"客服中心"},{class:"iconfont icon-shop",text:"商家入驻"},{class:"iconfont icon-cooperation",text:"我要合作"},{class:"iconfont icon-user",text:"云鸽招募"},{class:"iconfont icon-about",text:"关于我们"},{class:"iconfont icon-about",text:"退出登录"}],userName:""}},mounted:function(){this.userName=JSON.parse(I("user_info")).name},components:{footerBottom:pt},methods:{ToSetting:function(t){var e=this;0==t?this.$router.push("/modifyLocation"):7==t?_["a"].confirm({message:"确认退出登录吗？"}).then(function(){e.axios.get("/logout").catch(function(){_["a"].alert({message:"退出登录失败"})}),e.$router.push("/studentLogin")}).catch(function(){}):1==t?this.$router.push("/help"):this.$router.push("/contact")}}}),jt=At,Nt=(a("e94c"),a("cffe"),Object(c["a"])(jt,Rt,It,!1,null,"41bafe0d",null)),Pt=Nt.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("div",{staticClass:"back",on:{click:t.RouteTo}},[a("i",{staticClass:"iconfont icon-l_arrow"})]),t._m(0),t._m(1)]),t._m(2),a("keep-alive",[a("router-view")],1)],1)},Wt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:a("76eb"),width:"64",height:"64"}})]),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("span",{staticClass:"name"},[t._v("第四食堂")])]),s("div",{staticClass:"description"},[t._v("\n                    云鸽专送 / 20分钟送达\n                ")]),s("div",{staticClass:"supports"},[s("div",{staticClass:"supports_desc"},[s("img",{staticClass:"img",attrs:{src:a("d14d"),alt:"up_door"}}),s("span",{staticClass:"text"},[t._v("支持送货上门服务")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"background"},[s("img",{attrs:{src:a("76eb"),width:"100%",height:"100%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab"},[a("div",{staticClass:"tab-item"},[t._v("\n            配送时间： 午餐11-13点 晚餐17-20点 宵夜21-22点半\n        ")])])}],Ft={name:"Shop",methods:{RouteTo:function(){this.$router.push("/home")}}},Ut=Ft,Jt=(a("2ba7"),Object(c["a"])(Ut,Dt,Wt,!1,null,"35c3fdc4",null)),Bt=Jt.exports,Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"wo_page",staticClass:"wo_page"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"wo_loading"}),s("ul",{ref:"wo_list",staticClass:"wo_list"},t._l(t.allOrderList,function(e,i){return s("li",{key:i,staticClass:"wo_item",on:{click:function(e){return t.ToDetail(i)}}},[s("div",{staticClass:"item_head"},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),s("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),s("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),s("div",{staticClass:"item_line"}),s("div",{staticClass:"item_content"},[s("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),s("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),e.deliveryphone?s("p",{staticClass:"phone"},[t._v("云鸽电话： "+t._s(e.deliveryphone))]):t._e(),s("p",{staticClass:"arrive_time"},[t._v("预计"+t._s(e.time)+"分钟到达")])]),s("input",{staticClass:"confirm_btn",attrs:{type:"button",value:"确认送达"},on:{click:function(e){return e.stopPropagation(),t.ToConfirmOrder(i)}}})])}),0)],1)],1)},Yt=[],qt=a("1fba");s["a"].use(_["c"]),s["a"].use(_["b"]);var Vt={name:"WaitOrder",data:function(){return{isInit:!1,isLoading:!1,allOrderList:[]}},created:function(){var t=this;this.axios.get("/order/refresh",{params:{status:"已接单"}}).then(function(e){e.data.data.forEach(function(t){t.timestamp=t.created_at,t.time=N(t.created_at),t.created_at=j(t.created_at)}),t.allOrderList=e.data.data.reverse(),t.isInit=!0}).catch(function(){_["a"].alert({message:"获取列表错误"})}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.wo_page=new qt["a"](this.$refs.wo_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,t.axios.get("/order/refresh",{params:{status:"已接单"}}).then(function(e){e.data.data.forEach(function(t){t.timestamp=t.created_at,t.time=N(t.created_at),t.created_at=j(t.created_at)}),t.allOrderList=e.data.data.reverse(),R("all_list",$()(t.allOrderList)),t.isInit=!0}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToDetail:function(t){R("order_id",this.allOrderList[t].serial_id),this.$router.push("/orderDetail")},ToConfirmOrder:function(t){var e=this;_["a"].confirm({message:"确认已送达吗？"}).then(function(){e.axios.get("/order/confirm",{params:{serial_id:e.allOrderList[t].serial_id}}).then(function(){_["a"].alert({message:"确认成功"}),e.allOrderList.splice(t,1)}).catch(function(){_["a"].alert({message:"确认失败"})})}).catch(function(){})},RouteTo:T}},Mt=Vt,Kt=(a("56c4"),Object(c["a"])(Mt,Ht,Yt,!1,null,"19827c28",null)),Gt=Kt.exports,Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"ao_page",staticClass:"ao_page"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"ao_loading"}),s("ul",{ref:"ao_list",staticClass:"ao_list"},t._l(t.askOrderList,function(e,i){return s("li",{key:i,staticClass:"ao_item",on:{click:function(e){return t.ToDetail(i)}}},[s("div",{staticClass:"item_head"},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),s("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),s("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),s("div",{staticClass:"item_line"}),s("div",{staticClass:"item_content"},[s("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),s("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),s("input",{ref:"cancel_btn",refInFor:!0,staticClass:"cancel_btn",attrs:{type:"button",value:"取消订单"},on:{click:function(e){return e.stopPropagation(),t.ToCancel(i)}}})])])}),0)],1)],1)},Xt=[],zt=a("5d73"),Zt=a.n(zt);s["a"].use(_["c"]),s["a"].use(_["b"]);var te={name:"AskOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],websocket:null}},created:function(){var t=this;this._initWebsocket(),this.axios.get("/order/refresh",{params:{status:"未接单"}}).then(function(e){e.data.data.forEach(function(e){e.timestamp=e.created_at,e.order_id=D(e.timestamp,e.serial_id),e.created_at=j(e.created_at),t.askOrderList.unshift(e)}),t.isInit=!0}).catch(function(){_["a"].alert({message:"获取列表错误"})}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.ao_page=new qt["a"](this.$refs.ao_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,t.axios.get("/order/refresh",{params:{status:"未接单"}}).then(function(e){e.data.data.forEach(function(e){e.timestamp=e.created_at,e.created_at=j(e.created_at),t.askOrderList.unshift(e)})}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToDetail:function(t){R("order_id",this.askOrderList[t].serial_id),this.$router.push("/orderDetail")},ToCancel:function(t){var e=this;_["a"].confirm({message:"确认要取消订单吗？"}).then(function(){e.axios.get("/order/cancel_wx",{params:{serial_id:e.askOrderList[t].serial_id}}).then(function(){e.askOrderList.splice(t,1),_["a"].alert({message:"取消订单成功"})}).catch(function(){_["a"].alert({message:"取消订单失败"})})}).catch(function(){})},_initWebsocket:function(){var t=this,e="ws://101.132.181.245:9501";this.websocket=new WebSocket(e),this.websocket.onopen=function(){t.webCloseLink(t.websocket)},this.websocket.onclose=function(){console.log("Disconnected")},this.websocket.onmessage=function(e){var a=JSON.parse(e.data);if("delivery"==a.message){var s=!0,i=!1,n=void 0;try{for(var r,o=Zt()(t.askOrderList);!(s=(r=o.next()).done);s=!0){var c=r.value;c["serial_id"]==a.id&&t.askOrderList.splice(t.askOrderList.indexOf(c),1)}}catch(l){i=!0,n=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw n}}}console.log("Retrieved data from server: "+a.message)},this.websocket.onerror=function(t){console.log("Error occured: "+t.data)}},webCloseLink:function(t){var e=this;t.send("心跳包内容");var a=setInterval(function(){if(t.send("心跳包内容"),2==t.readyState||3==t.readyState){clearInterval(e.hb);var s=1,i=setInterval(function(){if(2==t.readyState||3==t.readyState){if(e.websocket=new WebSocket(t.url),t=e.websocket,5==s)return void clearInterval(i);s++}else 1==t.readyState&&(e._initWebsocket(),clearInterval(a),clearInterval(i))},4e3)}},15e3)},RouteTo:T}},ee=te,ae=(a("d22d"),Object(c["a"])(ee,Qt,Xt,!1,null,"4f8af79a",null)),se=ae.exports,ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"co_page",staticClass:"co_page"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"ao_loading"}),s("ul",{ref:"co_list",staticClass:"co_list"},t._l(t.cancelOrderList,function(e,i){return s("li",{key:i,staticClass:"co_item",on:{click:function(e){return t.ToDetail(i)}}},[s("div",{staticClass:"item_head"},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),s("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))])]),s("div",{staticClass:"item_line"}),s("div",{staticClass:"item_content"},[s("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),s("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),s("p",{staticClass:"cancel_btn"},[t._v("已取消")])])])}),0)],1)],1)},ne=[];s["a"].use(_["c"]),s["a"].use(_["b"]);var re={name:"CancelOrder",data:function(){return{isInit:!1,isLoading:!1,cancelOrderList:[]}},created:function(){var t=this;this.axios.get("/order/refresh",{params:{status:"已取消"}}).then(function(e){t.cancelOrderList=e.data.data.reverse(),t.cancelOrderList.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),t.isInit=!0}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.co_page=new qt["a"](this.$refs.co_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,t.axios.get("/order/refresh",{params:{status:"已取消"}}).then(function(e){e.data.data.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),t.cancelOrderList=e.data.data.reverse()}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToDetail:function(t){R("order_id",this.cancelOrderList[t].serial_id),this.$router.push("/orderDetail")},RouteTo:T}},oe=re,ce=(a("241f"),Object(c["a"])(oe,ie,ne,!1,null,"3a6091e6",null)),le=ce.exports,de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"fo_page",staticClass:"fo_page"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"fo_loading"}),s("ul",{ref:"fo_list",staticClass:"fo_list"},t._l(t.cancelOrderList,function(e,i){return s("li",{key:i,staticClass:"fo_item",on:{click:function(e){return t.ToDetail(i)}}},[s("div",{staticClass:"item_head"},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),s("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))])]),s("div",{staticClass:"item_line"}),s("div",{staticClass:"item_content"},[s("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),s("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),s("p",{staticClass:"finish_btn"},[t._v("已完成")])])])}),0)],1)],1)},ue=[];s["a"].use(_["c"]),s["a"].use(_["b"]);var fe={name:"CancelOrder",data:function(){return{isInit:!1,isLoading:!1,cancelOrderList:[]}},created:function(){var t=this;this.axios.get("/order/refresh",{params:{status:"已完成"}}).then(function(e){t.cancelOrderList=e.data.data.reverse(),t.cancelOrderList.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),t.isInit=!0}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.fo_page=new qt["a"](this.$refs.fo_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,t.axios.get("/order/refresh",{params:{status:"已完成"}}).then(function(e){e.data.data.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),t.cancelOrderList=e.data.data.reverse()}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToDetail:function(t){R("order_id",this.cancelOrderList[t].serial_id),this.$router.push("/orderDetail")},RouteTo:T}},me=fe,pe=(a("9b9b"),Object(c["a"])(me,de,ue,!1,null,"599c663d",null)),he=pe.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml_page"},[a("head-top",{attrs:{goBack:"配送地址修改"}}),a("div",{staticClass:"ml_location"},[a("label",[t._v("配送地址:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.building,expression:"building"}],staticClass:"ml_building",attrs:{min:"7",max:"48",type:"text",placeholder:"XX"},domProps:{value:t.building},on:{input:function(e){e.target.composing||(t.building=e.target.value)}}}),a("label",[t._v("栋")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dorm,expression:"dorm"}],staticClass:"ml_dormitory",attrs:{type:"text",placeholder:"宿舍号"},domProps:{value:t.dorm},on:{input:function(e){e.target.composing||(t.dorm=e.target.value)}}})]),a("input",{staticClass:"ml_btn",attrs:{type:"button",value:"修改"},on:{click:t.ToModify}})],1)},_e=[],ge=a("5176"),Ce=a.n(ge),be={name:"ModifyLocation",data:function(){return{building:"",dorm:""}},methods:{ToModify:function(){var t=this,e={building:this.building,dorm:this.dorm};this.axios.get("/user/changeAddress",{params:e}).then(function(e){var a=e.data.data,s=JSON.parse(I("user_info")),i=Ce()(s,a);R("user_info",$()(i)),_["a"].alert({message:"修改成功"}),t.$router.push("/my")}).catch(function(t){_["a"].alert({message:t})})}},components:{headTop:bt}},we=be,xe=(a("f514"),a("0aae"),Object(c["a"])(we,ve,_e,!1,null,"675aca4e",null)),ke=xe.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ro_page"},[a("head-top",{staticClass:"ro_head",attrs:{center:"我的订单"}},[a("i",{staticClass:"iconfont icon-quit",attrs:{slot:"exit"},on:{click:t.ToExit},slot:"exit"})]),a("div",{staticClass:"ro_tab"},t._l(t.tabList,function(e,s){return a("div",{key:s,staticClass:"ro_tab-item",on:{click:function(e){return t.ToActive(t.tabList,s)}}},[a("router-link",{class:{active:e.active},attrs:{to:e.path}},[t._v(t._s(e.text))])],1)}),0),a("keep-alive",[a("router-view")],1)],1)},$e=[],Oe={name:"Order",data:function(){return{params:null,tabList:[{path:"/askRiderOrder",text:"未接单",active:!0},{path:"/waitRiderOrder",text:"未送达",active:!1},{path:"/pastRiderOrder",text:"已送达",active:!1}]}},methods:{ToActive:function(t,e){t.forEach(function(t){t.active=!1}),t[e].active=!0},ToExit:function(){var t=this;_["a"].confirm({message:"确认退出登录吗？"}).then(function(){t.axios.get("/logout").catch(function(){_["a"].alert({message:"退出登录失败"})}),t.$router.push("/riderLogin")}).catch(function(){})}},components:{headTop:bt}},ye=Oe,Te=(a("ce27"),a("1e54"),Object(c["a"])(ye,Le,$e,!1,null,"6f758bee",null)),Se=Te.exports,Ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"wro_page",staticClass:"wro_page"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"wro_loading"}),s("div",{staticClass:"wro_district"},t._l(t.districtList,function(e,a){return s("div",{key:a,staticClass:"wro_district-item",on:{click:function(e){return t.ToActive(t.districtList,a)}}},[s("div",{class:{active:e.active}},[t._v(t._s(e.text))])])}),0),s("ul",{ref:"wro_list",staticClass:"wro_list"},t._l(t.askOrderList,function(e,i){return s("li",{key:i,staticClass:"wro_item",on:{click:function(e){return t.ToDetail(i)}}},[s("div",{staticClass:"item_head"},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),s("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),s("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),s("div",{staticClass:"item_line"}),s("div",{staticClass:"item_content"},[s("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),s("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),s("p",{staticClass:"phone"},[t._v("用户电话： "+t._s(e.userphone))])])])}),0)],1)],1)},Re=[];s["a"].use(_["c"]),s["a"].use(_["b"]);var Ie={name:"WaitRiderOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],districtList:[{text:"全部",active:!0,district:""},{text:"西区",active:!1,district:"西区"},{text:"北区",active:!1,district:"北区"},{text:"南区",active:!1,district:"南区"}],params:null}},created:function(){var t=this;this._getList(this.districtList[0].district),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.wro_page=new qt["a"](this.$refs.wro_page,{click:!0})},ToDetail:function(t){R("order_id",this.askOrderList[t].serial_id),this.$router.push("/riderOrderDetail")},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,t.axios.get("/order/refresh",{params:t.params}).then(function(e){t.askOrderList=e.data.data,t.askOrderList.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),t.askOrderList.reverse()}).catch(function(){}),t.$nextTick(function(){t._initScroll()})},500)},ToActive:function(t,e){this._getList(this.districtList[e].district),t.forEach(function(t){t.active=!1}),t[e].active=!0},_getList:function(t){var e=this;this.params=""==t?{status:"已接单"}:{status:"已接单",district:t},this.axios.get("order/refresh",{params:this.params}).then(function(t){e.askOrderList=t.data.data,e.askOrderList.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),e.askOrderList.reverse()}).catch(function(){_["a"].alert({message:"获取列表失败"})}),this.isInit=!0},RouteTo:T}},Ae=Ie,je=(a("2bee"),Object(c["a"])(Ae,Ee,Re,!1,null,"0ee92a56",null)),Ne=je.exports,Pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"pro_page",staticClass:"pro_page"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"pro_loading"}),s("div",{staticClass:"pro_district"},t._l(t.districtList,function(e,a){return s("div",{key:a,staticClass:"pro_district-item",on:{click:function(e){return t.ToActive(t.districtList,a)}}},[s("div",{class:{active:e.active}},[t._v(t._s(e.text))])])}),0),s("ul",{ref:"pro_list",staticClass:"pro_list"},t._l(t.askOrderList,function(e,i){return s("li",{key:i,staticClass:"pro_item",on:{click:function(e){return t.ToDetail(i)}}},[s("div",{staticClass:"item_head"},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),s("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),s("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),s("div",{staticClass:"item_line"}),s("div",{staticClass:"item_content"},[s("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),s("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),s("p",{staticClass:"phone"},[t._v("用户电话： "+t._s(e.userphone))])])])}),0)],1)],1)},De=[];s["a"].use(_["c"]),s["a"].use(_["b"]);var We={name:"PastRiderOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],districtList:[{text:"全部",active:!0,district:""},{text:"西区",active:!1,district:"西区"},{text:"北区",active:!1,district:"北区"},{text:"南区",active:!1,district:"南区"}],params:null}},created:function(){var t=this;this._getList(this.districtList[0].district),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.pro_page=new qt["a"](this.$refs.pro_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,t.axios.get("/order/refresh",{params:t.params}).then(function(e){t.askOrderList=e.data.data,t.askOrderList.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),t.askOrderList.reverse()}),t.$nextTick(function(){t._initScroll()})},500)},ToActive:function(t,e){this._getList(this.districtList[e].district),t.forEach(function(t){t.active=!1}),t[e].active=!0},ToDetail:function(t){R("order_id",this.askOrderList[t].serial_id),this.$router.push("/riderOrderDetail")},_getList:function(t){var e=this;this.params=""==t?{status:"已完成"}:{status:"已完成",district:t},this.axios.get("order/refresh",{params:this.params}).then(function(t){e.askOrderList=t.data.data,e.askOrderList.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),e.askOrderList.reverse()}).catch(function(){_["a"].alert({message:"获取列表失败"})}),this.isInit=!0},RouteTo:T}},Fe=We,Ue=(a("bcab"),Object(c["a"])(Fe,Pe,De,!1,null,"8384c84c",null)),Je=Ue.exports,Be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"aro_page",staticClass:"aro_page"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"aro_loading"}),s("div",{staticClass:"aro_district"},t._l(t.districtList,function(e,a){return s("div",{key:a,staticClass:"aro_district-item",on:{click:function(e){return t.ToActive(t.districtList,a)}}},[s("div",{class:{active:e.active}},[t._v(t._s(e.text))])])}),0),s("ul",{ref:"aro_list",staticClass:"aro_list"},t._l(t.askOrderList,function(e,i){return s("li",{key:i,staticClass:"aro_item",on:{click:function(e){return t.ToDetail(i)}}},[s("div",{staticClass:"item_head"},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})]),s("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(e.timestamp+""+e.serial_id))]),s("p",{staticClass:"order_status"},[t._v(t._s(e.status))])]),s("div",{staticClass:"item_line"}),s("div",{staticClass:"item_content"},[s("p",{staticClass:"time"},[t._v("下单时间："+t._s(e.created_at))]),s("p",{staticClass:"location"},[t._v("地址："+t._s(e.district+e.dormtype+e.building+"栋"+e.dorm))]),s("p",{staticClass:"phone"},[t._v("用户电话： "+t._s(e.userphone))]),s("input",{ref:"cancel_btn",refInFor:!0,staticClass:"cancel_btn",attrs:{type:"button",value:"接单"},on:{click:function(e){return e.stopPropagation(),t.ToAccept(i)}}})])])}),0)],1)],1)},He=[];s["a"].use(_["c"]),s["a"].use(_["b"]);var Ye={name:"AskOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],districtList:[{text:"全部",active:!0,district:""},{text:"西区",active:!1,district:"西区"},{text:"北区",active:!1,district:"北区"},{text:"南区",active:!1,district:"南区"}],params:null,websocket:null,scroll:0}},activated:function(){this.$refs.aro_page.scrollTop=this.scroll},created:function(){var t=this;this._initWebsocket(),this._getList(this.districtList[0].district),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.aro_page=new qt["a"](this.$refs.aro_page,{click:!0})},ToDetail:function(t){var e=this.$refs.aro_page.scrollTop;this.scroll=e,R("order_id",this.askOrderList[t].serial_id),this.$router.push("/riderOrderDetail")},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,t.axios.get("/order/refresh",{params:t.params}).then(function(e){t.askOrderList=e.data.data,t.askOrderList.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),t.askOrderList.reverse()}).catch(function(){}),t.$nextTick(function(){t._initScroll()})},500)},_initWebsocket:function(){var t=this,e="ws://101.132.181.245:9501";this.websocket=new WebSocket(e),this.websocket.onopen=function(){t.webCloseLink(t.websocket)},this.websocket.onclose=function(){console.log("Disconnected")},this.websocket.onmessage=function(e){var a=JSON.parse(e.data);if("cancel"==a.message){var s=!0,i=!1,n=void 0;try{for(var r,o=Zt()(t.askOrderList);!(s=(r=o.next()).done);s=!0){var c=r.value;c["serial_id"]==a.id&&t.askOrderList.splice(t.askOrderList.indexOf(c),1)}}catch(l){i=!0,n=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw n}}}else"generate"==a.message&&(a.timestamp=a.time,a.created_at=j(a.time),a.serial_id=a.id,t.askOrderList.unshift(a));console.log("Retrieved data from server: "+a.message)},this.websocket.onerror=function(t){console.log("Error occured: "+t.data)}},webCloseLink:function(t){var e=this;t.send("心跳包内容");var a=setInterval(function(){if(t.send("心跳包内容"),2==t.readyState||3==t.readyState){clearInterval(e.hb);var s=1,i=setInterval(function(){if(2==t.readyState||3==t.readyState){if(e.websocket=new WebSocket(t.url),t=e.websocket,5==s)return void clearInterval(i);s++}else 1==t.readyState&&(e._initWebsocket(),clearInterval(a),clearInterval(i))},4e3)}},15e3)},ToAccept:function(t){var e=this;_["a"].confirm({message:"确定要接下该单吗？"}).then(function(){_["a"].alert({message:"接单成功"}),e._sendWebsocket(t),e.askOrderList.splice(t,1)}).catch(function(){})},_sendWebsocket:function(t){this.websocket.send('{"url":"/order/delivery","serial_id":'+this.askOrderList[t].serial_id+',"deliveryphone":"15014348414"}')},ToActive:function(t,e){this._getList(this.districtList[e].district),t.forEach(function(t){t.active=!1}),t[e].active=!0},_getList:function(t){var e=this;this.params=""==t?{status:"未接单"}:{status:"未接单",district:t},this.axios.get("order/refresh",{params:this.params}).then(function(t){e.askOrderList=t.data.data,e.askOrderList.forEach(function(t){t.timestamp=t.created_at,t.created_at=j(t.created_at)}),e.askOrderList.reverse()}).catch(function(){_["a"].alert({message:"获取列表失败"})}),this.isInit=!0},RouteTo:T}},qe=Ye,Ve=(a("f797"),Object(c["a"])(qe,Be,He,!1,null,"0b3883d1",null)),Me=Ve.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"od_page"},[a("head-top",{staticClass:"od_head",attrs:{goBack:"订单详情"}}),a("section",{staticClass:"od_food"},[a("p",{staticClass:"head"},[t._v("\n                四饭\n            ")]),a("div",{staticClass:"line"}),a("div",{staticClass:"food"},[a("ul",{staticClass:"list"},t._l(t.order_info.foodlist,function(e,s){return a("li",{key:s,staticClass:"item"},[t._m(0,!0),a("div",{staticClass:"content"},[a("div",{staticClass:"l_content"},[a("p",{staticClass:"name"},[t._v("\n                                    "+t._s(e.food)+"\n                                ")]),a("p",{staticClass:"count"},[t._v("\n                                    x"+t._s(t.order_info.numberlist[s])+"\n                                ")])]),a("p",{staticClass:"price"},[t._v("\n                                ￥"+t._s(e.price)+"\n                            ")])])])}),0)]),a("div",{staticClass:"line"}),a("div",{staticClass:"fee"},[a("p",{staticClass:"label"},[t._v("配送费")]),a("p",{staticClass:"number"},[t._v("￥"+t._s(t.order_info.fee))])]),a("div",{staticClass:"line"}),a("div",{staticClass:"total_price"},[t._v("\n                合计 "),a("i",[t._v("￥"+t._s(t.order_info.money))])])]),t.order_info.deliveryphone?a("section",{staticClass:"od_delivery"},[a("p",{staticClass:"head"},[t._v("\n                配送信息\n            ")]),a("div",{staticClass:"line"}),a("div",{staticClass:"rider"},[a("p",{staticClass:"label"},[t._v("\n                    配送云鸽电话\n                ")]),a("p",{staticClass:"name"},[t._v("\n                    "+t._s(t.order_info.deliveryphone)+"\n                ")])]),a("div",{staticClass:"location"},[a("p",{staticClass:"label"},[t._v("\n                    配送地址\n                ")]),a("div",{staticClass:"info"},[a("p",{staticClass:"info"},[t._v("\n                    "+t._s(t.order_info.username)+" "+t._s(t.order_info.userphone)+"\n                    ")]),a("p",{staticClass:"direct"},[t._v("\n                        "+t._s(t.order_info.district+t.order_info.dormtype+t.order_info.building+"栋"+t.order_info.dorm)+"\n                    ")])])])]):t._e(),a("section",{staticClass:"od_order"},[a("p",{staticClass:"head"},[t._v("\n                订单信息\n            ")]),a("div",{staticClass:"line"}),a("div",{staticClass:"id"},[a("p",{staticClass:"label"},[t._v("\n                    订单号码\n                ")]),a("p",{staticClass:"number"},[t._v("\n                    "+t._s(t.order_info.timestamp+""+t.order_info.serial_id)+"\n                ")])]),a("div",{staticClass:"time"},[a("p",{staticClass:"label"},[t._v("\n                    下单时间\n                ")]),a("p",{staticClass:"number"},[t._v("\n                    "+t._s(t.order_info.created_at)+"\n                ")])])])],1)},Ge=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{width:"57",height:"57",src:a("76eb"),alt:"food"}})])}],Qe={name:"OrderDetail",data:function(){return{order_info:{}}},created:function(){var t=this;this.axios.get("/order/detail",{params:{serial_id:I("order_id")}}).then(function(e){e.data.data.timestamp=e.data.data.created_at,e.data.data.created_at=j(e.data.data.created_at),e.data.data.numberlist=JSON.parse(e.data.data.numberlist),t.order_info=e.data.data}).catch(function(){_["a"].alert({message:"获取订单详情失败"})})},components:{headTop:bt}},Xe=Qe,ze=(a("82aa"),Object(c["a"])(Xe,Ke,Ge,!1,null,"67058598",null)),Ze=ze.exports,ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods"},[a("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[a("ul",t._l(t.goods,function(e,s){return a("li",{key:s,class:s==t.menuIndex?"menu-item-selected":"menu-item",attrs:{"data-stallId":"item.id"},on:{click:function(e){return t.menuClick(s,e)}}},[a("span",{staticClass:"text"},[t._v("\n                "+t._s(e.name)+"\n            ")])])}),0)]),a("div",{ref:"foodsWrapper",staticClass:"foods-wrapper",attrs:{id:"wrapper"}},[a("ul",t._l(t.goods,function(e,s){return a("li",{key:s,staticClass:"food-list food-list-hook"},[a("h1",[t._v(t._s(e.name))]),a("ul",t._l(e.recipe,function(e,s){return a("li",{key:s,staticClass:"food-item",attrs:{"data-id":"food.id"}},[t._m(0,!0),a("div",{staticClass:"content"},[a("h2",[t._v(t._s(e.food))]),a("div",{staticClass:"price"},[a("span",{staticClass:"newPrice"},[a("span",{staticClass:"unit"},[t._v("￥")]),t._v("\n                                    "+t._s(e.price)+"\n                                ")])]),a("div",{staticClass:"cartcontrol-wrapper"},[a("cartcontrol",{attrs:{food:e}})],1)])])}),0)])}),0)]),a("shopCart",{attrs:{minPrice:t.minPrice,selectFoods:t.selectFoods}})],1)},ea=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon"},[s("img",{attrs:{src:a("76eb"),alt:"food_icon",width:"57",height:"57"}})])}],aa=a("75fc"),sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"shopCart"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-left",on:{click:t.listToggle}},[a("div",{staticClass:"logo-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}],staticClass:"badge"},[t._v("\n                        "+t._s(t.totalCount)+"\n                    ")]),a("div",{staticClass:"logo",class:{active:t.totalPrice}},[a("i",{staticClass:"iconfont icon-shopcart"})])]),a("div",{staticClass:"price",class:{active:t.totalPrice}},[t._v("\n                    ￥"+t._s(t.totalPrice)+"\n                ")]),a("div",{staticClass:"desc"},[t._v("\n                    另需要配送费￥"+t._s(t.deliveryPrice)+"元\n                ")])]),a("div",{staticClass:"content-right",class:{enough:t.totalPrice>=t.minPrice},on:{click:t.ToPurchase}},[t._v("\n                "+t._s(t.payDesc)+"\n            ")])]),a("div",{staticClass:"ball-container"},t._l(t.balls,function(e,s){return a("transition",{key:s,attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[a("div",{staticClass:"inner inner-hook"})])])}),1),a("transition",{attrs:{name:"transHeight"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[a("div",{staticClass:"list-header"},[a("h1",{staticClass:"title"},[t._v("购物车")]),a("span",{staticClass:"empty",on:{click:function(e){return t.setEmpty()}}},[t._v("清空")])]),a("div",{ref:"foodlist",staticClass:"list-content"},[a("ul",t._l(t.selectFoods,function(e,s){return a("li",{key:s,staticClass:"food"},[a("span",{staticClass:"name"},[t._v(t._s(e.food))]),a("div",{staticClass:"price"},[a("span",[t._v("￥"+t._s(e.price*e.count))])]),a("div",{staticClass:"cartcontrol-wrapper"},[a("cartcontrol",{attrs:{food:e}})],1)])}),0)])])])],1),a("transition",{attrs:{name:"fade-backdrop"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showBackdrop,expression:"showBackdrop"}],staticClass:"backdrop",on:{click:t.hideBackdrop}})])],1)},ia=[],na=(a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cartcontrol"},[a("transition",{attrs:{name:"fadeRotate"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"cart-decrease",on:{click:function(e){return t.decreaseCart()}}},[a("span",{staticClass:"iconfont icon-decrease inner"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"cart-count"},[t._v("\n        "+t._s(t.food.count)+"\n    ")]),a("div",{staticClass:"cart-add",on:{click:function(e){return t.addCart(e)}}},[a("i",{staticClass:"iconfont icon-add"})])],1)}),ra=[],oa={name:"cartcontrol",props:{food:Object},methods:{addCart:function(t){t._constructed&&(this.food.count||s["a"].set(this.food,"count",0),this.food.count++,this.$root.eventHub.$emit("cart.add",t.target))},decreaseCart:function(){this.food.count--}}},ca=oa,la=(a("6bc0"),a("8d6b"),Object(c["a"])(ca,na,ra,!1,null,"fc3e82ce",null)),da=la.exports,ua={props:{selectFoods:{type:Array,default:function(){return[]}},minPrice:{type:Number,default:0}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],listShow:!1}},created:function(){this.$root.eventHub.$on("cart.add",this.drop)},computed:{showBackdrop:function(){return!(!this.listShow||!this.totalPrice)},totalPrice:function(){var t=0;return this.selectFoods.forEach(function(e){e.count&&(t+=e.price*e.count)}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.count}),t},leftAmount:function(){return!!(this.minPrice-this.totalPrice>0&&this.totalPrice)},payDesc:function(){var t=this.minPrice-this.totalPrice;return this.totalPrice?t>0?"还差￥".concat(t,"元"):"去结算":"￥".concat(this.totalPrice,"起送")},deliveryPrice:function(){var t=JSON.parse(I("user_info")).district,e={"西区":2.5,"南区":2,"北区":1.5};return this.totalPrice<=13?e[t]:this.totalPrice>13&&this.totalPrice<=25?2*e[t]:6}},watch:{selectFoods:function(){var t=!1;this.selectFoods.forEach(function(e){1===e.count&&(t=!0)}),t||(this.listShow=!1)}},methods:{drop:function(t){for(var e=0,a=this.balls.length;e<a;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},setEmpty:function(){this.selectFoods.forEach(function(t){t.count=0}),this.listShow=!1},hideBackdrop:function(){this.listShow=!1},_initScroll:function(){this.foodlistScroll=new qt["a"](this.$refs.foodlist,{click:!0})},listToggle:function(){var t=this;this.selectFoods.length&&(this.listShow=!this.listShow,this.listShow&&this.$nextTick(function(){t.foodlistScroll?t.foodlistScroll.refresh():t._initScroll()}))},beforeEnter:function(t){var e=this.balls.length;while(e--){var a=this.balls[e];if(a.show){var s=a.el.getBoundingClientRect(),i=s.left-32,n=-(window.innerHeight-s.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,".concat(n,"px,0)"),t.style.transform="translate3d(0,".concat(n,"px,0)");var r=t.querySelector(".inner-hook");r.style.webkitTransform="translate3d(".concat(i,"px,0,0)"),r.style.transform="translate3d(".concat(i,"px,0,0)")}}},enter:function(t){t.offsetHeight,this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.querySelector(".inner-hook");e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)"})},afterEnter:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")},ToPurchase:function(){var t=this;this.totalPrice<this.minPrice||_["a"].confirm({title:"订单金额",message:"你总共需要支付".concat(this.totalPrice+this.deliveryPrice,"元,确认下单吗？")}).then(function(){var e=[],a=[];t.selectFoods.forEach(function(t){t.count&&(e.push(t.count),a.push(t.id))});var s=JSON.parse(I("user_info")),i=new FormData;i.append("foodlist",$()(a)),i.append("numberlist",$()(e)),i.append("money",t.totalPrice),i.append("district",s.district),i.append("dormtype",s.dormtype),i.append("building",s.building),i.append("dorm",s.dorm),i.append("userphone",s.phone),i.append("fee",t.deliveryPrice),t.axios.post("/order/generate_wx",i).then(function(e){var a=e.data.data;console.log(e),console.log(a.jsApiParameters),console.log(a.out_trade_no),t.callpay(a.jsApiParameters,a.out_trade_no)}).catch(function(){_["a"].alert({message:"下单失败"})})}).catch(function(){})},jsApiCall:function(t,e){WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(){var t=this;this.axios.get("/wx/check",{params:{out_trade_no:e}}).then(function(e){console.log(e),_["a"].alert({message:"下单成功"}),t.$router.push("/order")}).catch(function(t){console.log(t)})})},callpay:function(t,e){"undefined"===typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.jsApiCall(t,e),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.jsApiCall(t,e)),document.attachEvent("onWeixinJSBridgeReady",this.jsApiCall(t,e))):this.jsApiCall(t,e)}},components:{cartcontrol:da}},fa=ua,ma=(a("2c07"),a("0596"),Object(c["a"])(fa,sa,ia,!1,null,"7e7668de",null)),pa=ma.exports,ha={name:"Goods",data:function(){return{goods:[],listHeight:[],foodsScrollY:0,selectedFood:"",minPrice:3,menuIndex:0}},created:function(){var t=this;JSON.parse(I("good_list"))?(this.goods=Object(aa["a"])(JSON.parse(I("good_list"))),this.$nextTick(function(){t._initScroll(),t._calculateHeight()})):this.axios.get("/recipe/all").then(function(e){t.goods=Object(aa["a"])(e.data.data),R("good_list",$()(t.goods)),t.$nextTick(function(){t._initScroll(),t._calculateHeight()})}).catch(function(){_["a"].alert({message:"获取列表失败"})})},computed:{selectFoods:function(){var t=[];return this.goods.forEach(function(e){e.recipe.forEach(function(e){e.count&&t.push(e)})}),t}},methods:{_initScroll:function(){var t=this;this.menuWrapper=new qt["a"](this.$refs.menuWrapper,{click:!0}),this.foodsScroll=new qt["a"](this.$refs.foodsWrapper,{click:!0,probeType:3}),this.foodsScroll.on("scroll",function(e){t.foodsScrollY=Math.abs(Math.round(e.y))})},_calculateHeight:function(){var t=this.$refs.foodsWrapper.querySelectorAll(".food-list-hook"),e=0;this.listHeight.push(e);for(var a=0,s=t.length;a<s;a++){var i=t[a];e+=i.clientHeight,this.listHeight.push(e)}},menuClick:function(t,e){e._constructed&&(this.menuIndex=t,this.foodsScroll.scrollTo(0,-this.listHeight[t],300))}},components:{shopCart:pa,cartcontrol:da}},va=ha,_a=(a("830c"),Object(c["a"])(va,ta,ea,!1,null,"6cec1606",null)),ga=_a.exports,Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("head-top",{attrs:{goBack:"帮助与反馈"}}),a("textarea",{staticClass:"content",attrs:{placeholder:"say something~",rows:"3"}}),a("input",{staticClass:"btn",attrs:{type:"button",value:"提交"}})],1)},ba=[],wa={name:"Help",methods:{},components:{headTop:bt}},xa=wa,ka=(a("f138"),Object(c["a"])(xa,Ca,ba,!1,null,"01e54b10",null)),La=ka.exports,$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c_page"},[a("head-top",{attrs:{goBack:" "}}),t._m(0),a("h2",{staticClass:"c_name"},[t._v("云鸽校园")]),t._m(1)],1)},Oa=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"c_logo"},[s("img",{attrs:{src:a("a346"),alt:"logo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"c_email"},[t._v("联系邮箱："),a("span",[t._v("Ygxyfwtd@126.com")])])}],ya={name:"Contact",components:{headTop:bt}},Ta=ya,Sa=(a("4346"),Object(c["a"])(Ta,$a,Oa,!1,null,"9eafc59c",null)),Ea=Sa.exports,Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n    pay\n")])},Ia=[],Aa={name:"Pay"},ja=Aa,Na=Object(c["a"])(ja,Ra,Ia,!1,null,"b3718c5a",null),Pa=Na.exports;s["a"].use(u["a"]);var Da=new u["a"]({routes:[{path:"/",redirect:"/index"},{path:"/index",component:J},{path:"/riderRegist",component:K},{path:"/studentRegist",component:tt},{path:"/riderLogin",component:rt},{path:"/studentLogin",component:rt},{path:"/home",component:Lt},{path:"/order",component:Et,redirect:"/askOrder",children:[{path:"/waitOrder",component:Gt},{path:"/askOrder",component:se},{path:"/cancelOrder",component:le},{path:"/finishOrder",component:he}]},{path:"/my",component:Pt},{path:"/shop",component:Bt,redirect:"/goods",children:[{path:"/goods",component:ga,meta:{keepAlive:!0}}]},{path:"/modifyLocation",component:ke},{path:"/riderOrder",component:Se,redirect:"/askRiderOrder",children:[{path:"/waitRiderOrder",component:Ne,meta:{keepAlive:!0}},{path:"/askRiderOrder",component:Me,meta:{keepAlive:!0}},{path:"/pastRiderOrder",component:Je,meta:{keepAlive:!0}}]},{path:"/orderDetail",component:Ze},{path:"/help",component:La},{path:"/contact",component:Ea},{path:"/riderOrderDetail",component:Ze},{path:"/pay",component:Pa}]}),Wa={record_orderId:function(t,e){t.order_id=e,R("order_id",e)}},Fa=a("4b76"),Ua=a.n(Fa),Ja=a("94d5"),Ba=a.n(Ja);s["a"].use(f["a"]);var Ha={order_id:""},Ya=new f["a"].Store({state:Ha,getters:Ba.a,actions:Ua.a,mutations:Wa}),qa=a("1dce"),Va=a.n(qa);a("157a"),a("31bb");s["a"].config.productionTip=!1,C.a.defaults.withCredentials=!0,C.a.defaults.baseURL="http://dtygfw.top/","addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){p.a.attach(document.body)},!1),s["a"].use(u["a"]),s["a"].use(f["a"]),s["a"].use(_["d"]),s["a"].use(w.a,C.a),s["a"].use(Va.a),s["a"].use(v.a,{preload:1.3,attempt:1}),new s["a"]({render:function(t){return t(d)},router:Da,store:Ya,data:{eventHub:new s["a"]}}).$mount("#app")},5942:function(t,e,a){"use strict";var s=a("c9a3"),i=a.n(s);i.a},"5a4b":function(t,e,a){},"5b8f":function(t,e,a){},"5c3d":function(t,e,a){"use strict";var s=a("e644"),i=a.n(s);i.a},"64c1":function(t,e,a){},"667d":function(t,e,a){"use strict";var s=a("41ee"),i=a.n(s);i.a},"66a4":function(t,e,a){"use strict";var s=a("16f9"),i=a.n(s);i.a},6705:function(t,e,a){"use strict";var s=a("52c9"),i=a.n(s);i.a},"69cc":function(t,e,a){},"6ab1":function(t,e,a){},"6bc0":function(t,e,a){"use strict";var s=a("ba7c"),i=a.n(s);i.a},"75cf":function(t,e,a){"use strict";var s=a("f9b3"),i=a.n(s);i.a},"76eb":function(t,e,a){t.exports=a.p+"img/fourth.d13e6b7f.jpg"},"7f26":function(t,e,a){},"82aa":function(t,e,a){"use strict";var s=a("5b8f"),i=a.n(s);i.a},"830c":function(t,e,a){"use strict";var s=a("c657"),i=a.n(s);i.a},"8aea":function(t,e,a){"use strict";var s=a("22cc"),i=a.n(s);i.a},"8d6b":function(t,e,a){"use strict";var s=a("38f1"),i=a.n(s);i.a},"902c":function(t,e,a){},"92ea":function(t,e,a){},"93df":function(t,e,a){},"941e":function(t,e,a){},"94d5":function(t,e){},"9b9b":function(t,e,a){"use strict";var s=a("1db8"),i=a.n(s);i.a},"9de0":function(t,e,a){},a064:function(t,e,a){"use strict";var s=a("aad4"),i=a.n(s);i.a},a346:function(t,e){t.exports="data:image/png;base64,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"},a605:function(t,e,a){},aad4:function(t,e,a){},b2a3:function(t,e,a){t.exports=a.p+"img/index.d457ee5f.svg"},ba7c:function(t,e,a){},bcab:function(t,e,a){"use strict";var s=a("941e"),i=a.n(s);i.a},c1a1:function(t,e,a){t.exports=a.p+"img/food.6afd05f4.svg"},c657:function(t,e,a){},c7c8:function(t,e,a){},c9a3:function(t,e,a){},cd85:function(t,e,a){},ce27:function(t,e,a){"use strict";var s=a("eaa2"),i=a.n(s);i.a},cffe:function(t,e,a){"use strict";var s=a("5a4b"),i=a.n(s);i.a},d14d:function(t,e,a){t.exports=a.p+"img/up_door.98803ab7.svg"},d22d:function(t,e,a){"use strict";var s=a("7f26"),i=a.n(s);i.a},d7db:function(t,e,a){t.exports=a.p+"img/head.ff86e3ae.jpg"},da26:function(t,e,a){t.exports=a.p+"img/rider.1e9d447e.svg"},dbb9:function(t,e,a){"use strict";var s=a("fcb7"),i=a.n(s);i.a},e644:function(t,e,a){},e688:function(t,e,a){},e94c:function(t,e,a){"use strict";var s=a("902c"),i=a.n(s);i.a},eaa2:function(t,e,a){},f138:function(t,e,a){"use strict";var s=a("6ab1"),i=a.n(s);i.a},f514:function(t,e,a){"use strict";var s=a("64c1"),i=a.n(s);i.a},f797:function(t,e,a){"use strict";var s=a("c7c8"),i=a.n(s);i.a},f8f9:function(t,e,a){t.exports=a.p+"img/student.3c5ba8fa.svg"},f9b3:function(t,e,a){},fcb7:function(t,e,a){},ffe5:function(t,e,a){}});
//# sourceMappingURL=app.be6d9839.js.map