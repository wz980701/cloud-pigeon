(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["WaitOrder"],{"0b3e":function(t,i,a){"use strict";var e=a("22f6"),s=a.n(e);s.a},"22f6":function(t,i,a){},"3ecf":function(t,i,a){"use strict";var e=a("cca7"),s=a.n(e);s.a},"78e2":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{ref:"wo_page",staticClass:"wo_page"},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(i){t.isLoading=i},expression:"isLoading"}},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"wo_loading"}),a("ul",{ref:"wo_list",staticClass:"wo_list"},t._l(t.allOrderList,function(i,e){return a("order-item",{key:e,tag:"li",attrs:{data:i,wait:"已接单"},on:{ToConfirmOrder:function(i){return t.ToConfirmOrder(e)}}})}),1)],1)],1)},s=[],n=a("f499"),r=a.n(n),c=a("2b0e"),o=a("1fba"),l=a("9e6f"),d=a("f20c"),f=a("8c7f"),u=a("b970");c["a"].use(u["c"]),c["a"].use(u["b"]);var _={name:"WaitOrder",data:function(){return{isInit:!1,isLoading:!1,allOrderList:[],params:null}},created:function(){var t=this;Object(d["h"])(),this.params={status:"已接单"},Object(f["j"])(this.params).then(function(i){t.allOrderList=Object(d["b"])(i),t.isInit=!0}).catch(function(){u["a"].alert({message:"获取列表错误"})}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.wo_page=new o["a"](this.$refs.wo_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Object(f["j"])(t.params).then(function(i){t.allOrderList=Object(d["b"])(i),Object(d["m"])("all_list",r()(t.allOrderList)),t.isInit=!0}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},ToConfirmOrder:function(t){var i=this;u["a"].confirm({message:"确认已送达吗？"}).then(function(){var a={serial_id:i.allOrderList[t].serial_id};Object(f["d"])(a).then(function(){u["a"].alert({message:"确认成功"}),i.allOrderList.splice(t,1)}).catch(function(){u["a"].alert({message:"确认失败"})})}).catch(function(){})},RouteTo:d["a"]},components:{orderItem:l["a"]}},p=_,m=(a("0b3e"),a("2877")),h=Object(m["a"])(p,e,s,!1,null,"d0d4c7f0",null);i["default"]=h.exports},"9e6f":function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("div",{staticClass:"item",on:{click:t.ToDetail}},[a("div",{staticClass:"item_head"},[t._m(0),a("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(t.data.timestamp+""+t.data.serial_id))]),t.ask||t.wait||t.riderAsk||t.riderPast||t.riderWait?a("p",{staticClass:"order_status"},[t._v(t._s(t.data.status))]):t._e()]),a("div",{staticClass:"item_line"}),a("div",{staticClass:"item_content"},[a("p",{staticClass:"time"},[t._v("下单时间："+t._s(t.data.created_at))]),a("p",{staticClass:"location"},[t._v("地址："+t._s(t.data.district+t.data.dormtype+t.data.building+"栋"+t.data.dorm))]),t.wait||t.finish?a("p",{staticClass:"phone"},[t._v("云鸽电话： "+t._s(t.data.deliveryphone))]):t._e(),t.riderAsk||t.riderPast||t.riderWait?a("p",{staticClass:"phone"},[t._v("用户电话： "+t._s(t.data.userphone))]):t._e(),t.wait?a("p",{staticClass:"arrive_time"},[t._v("预计"+t._s(t.data.time)+"分钟到达")]):t._e(),t.finish?a("p",{staticClass:"finish_text"},[t._v("已完成")]):t._e(),t.cancel?a("p",{staticClass:"cancel_text"},[t._v("已取消")]):t._e(),t.ask?a("input",{ref:"cancel_btn",staticClass:"cancel_btn",attrs:{type:"button",value:"取消订单"},on:{click:function(i){return i.stopPropagation(),t.ToCancel(i)}}}):t._e(),t.riderAsk?a("input",{ref:"accept_btn",staticClass:"accept_btn",attrs:{type:"button",value:"接单"},on:{click:function(i){return i.stopPropagation(),t.ToAccept(i)}}}):t._e()]),t.wait?a("input",{staticClass:"confirm_btn",attrs:{type:"button",value:"确认送达"},on:{click:function(i){return i.stopPropagation(),t.ToConfirmOrder(i)}}}):t._e()])])},s=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"img_wrapper"},[e("img",{attrs:{src:a("d7db"),alt:"dinning_room"}})])}],n=a("f20c"),r={name:"Item",props:["data","wait","ask","finish","cancel","riderAsk","riderPast","riderWait"],methods:{ToConfirmOrder:function(){this.$emit("ToConfirmOrder")},ToDetail:function(){Object(n["m"])("order_id",this.data.serial_id),this.$router.push("/orderDetail")},ToCancel:function(){this.$emit("ToCancel")},ToAccept:function(){this.$emit("ToAccept")}}},c=r,o=(a("3ecf"),a("2877")),l=Object(o["a"])(c,e,s,!1,null,"289acd49",null);i["a"]=l.exports},a21f:function(t,i,a){var e=a("584a"),s=e.JSON||(e.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},cca7:function(t,i,a){},d7db:function(t,i,a){t.exports=a.p+"img/head.ff86e3ae.jpg"},f499:function(t,i,a){t.exports=a("a21f")}}]);
//# sourceMappingURL=WaitOrder.998880e3.js.map