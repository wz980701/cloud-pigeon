(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AskOrder"],{"0fc9":function(t,e,n){var r=n("3a38"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},1654:function(t,e,n){"use strict";var r=n("71c1")(!0);n("30f1")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},1691:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"241e":function(t,e,n){var r=n("25eb");t.exports=function(t){return Object(r(t))}},"25eb":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"30f1":function(t,e,n){"use strict";var r=n("b8e3"),i=n("63b6"),o=n("9138"),a=n("35e8"),s=n("481b"),c=n("8f60"),u=n("45f2"),f=n("53e2"),l=n("5168")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",v="values",b=function(){return this};t.exports=function(t,e,n,_,m,g,y){c(n,e,_);var k,O,x,w=function(t){if(!d&&t in T)return T[t];switch(t){case h:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},L=e+" Iterator",C=m==v,S=!1,T=t.prototype,j=T[l]||T[p]||m&&T[m],A=j||w(m),P=m?C?w("entries"):A:void 0,I="Array"==e&&T.entries||j;if(I&&(x=f(I.call(new t)),x!==Object.prototype&&x.next&&(u(x,L,!0),r||"function"==typeof x[l]||a(x,l,b))),C&&j&&j.name!==v&&(S=!0,A=function(){return j.call(this)}),r&&!y||!d&&!S&&T[l]||a(T,l,A),s[e]=A,s[L]=b,m)if(k={values:C?A:w(v),keys:g?A:w(h),entries:P},y)for(O in k)O in T||o(T,O,k[O]);else i(i.P+i.F*(d||S),e,k);return k}},"32fc":function(t,e,n){var r=n("e53d").document;t.exports=r&&r.documentElement},"335c":function(t,e,n){var r=n("6b4c");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},"36c3":function(t,e,n){var r=n("335c"),i=n("25eb");t.exports=function(t){return r(i(t))}},"3a38":function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},"3ecf":function(t,e,n){"use strict";var r=n("cca7"),i=n.n(r);i.a},"40c3":function(t,e,n){var r=n("6b4c"),i=n("5168")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},"45f2":function(t,e,n){var r=n("d9f6").f,i=n("07e3"),o=n("5168")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"481b":function(t,e){t.exports={}},"50ed":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},5168:function(t,e,n){var r=n("dbdb")("wks"),i=n("62a0"),o=n("e53d").Symbol,a="function"==typeof o,s=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=r},5397:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"ao_page",staticClass:"ao_page"},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isInit,expression:"!isInit"}],staticClass:"ao_loading"}),n("ul",{ref:"ao_list",staticClass:"ao_list"},t._l(t.askOrderList,function(e,r){return n("orderItem",{key:r,tag:"li",attrs:{data:e,ask:"未接单"},on:{ToCancel:function(e){return t.ToCancel(r)}}})}),1)],1)],1)},i=[],o=n("5d73"),a=n.n(o),s=n("2b0e"),c=n("1fba"),u=n("9e6f"),f=n("f20c"),l=n("8c7f"),d=n("b970");s["a"].use(d["c"]),s["a"].use(d["b"]);var p={name:"AskOrder",data:function(){return{isInit:!1,isLoading:!1,askOrderList:[],websocket:null,params:null}},created:function(){var t=this;Object(f["h"])(),this._initWebsocket(),this.params={status:"未接单"},Object(l["j"])(this.params).then(function(e){t.askOrderList=Object(f["b"])(e),t.isInit=!0}).catch(function(){d["a"].alert({message:"获取列表错误"})}),this.$nextTick(function(){t._initScroll()})},methods:{_initScroll:function(){this.ao_page=new c["a"](this.$refs.ao_page,{click:!0})},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1,Object(l["j"])(t.params).then(function(e){t.askOrderList=Object(f["b"])(e)}).catch(function(t){alert(t)}),t.$nextTick(function(){t._initScroll()})},500)},_initWebsocket:function(){var t=this,e="ws://101.132.181.245:9501";this.websocket=new WebSocket(e),this.websocket.onopen=function(){Object(f["o"])(t.websocket)},this.websocket.onclose=function(){console.log("Disconnected")},this.websocket.onmessage=function(e){var n=JSON.parse(e.data);t.getDelivery(n),console.log("Retrieved data from server: "+n.message)},this.websocket.onerror=function(t){console.log("Error occured: "+t.data)}},ToCancel:function(t){var e=this;d["a"].confirm({message:"确认要取消订单吗？"}).then(function(){var n={serial_id:e.askOrderList[t].serial_id};Object(l["a"])(n).then(function(){e.askOrderList.splice(t,1),d["a"].alert({message:"取消订单成功"})}).catch(function(){d["a"].alert({message:"取消订单失败"})})}).catch(function(){})},getDelivery:function(t){if("delivery"==t.message){var e=!0,n=!1,r=void 0;try{for(var i,o=a()(this.askOrderList);!(e=(i=o.next()).done);e=!0){var s=i.value;s["serial_id"]==t.id&&this.askOrderList.splice(this.askOrderList.indexOf(s),1)}}catch(c){n=!0,r=c}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},RouteTo:f["a"]},components:{orderItem:u["a"]}},h=p,v=(n("6b70"),n("2877")),b=Object(v["a"])(h,r,i,!1,null,"fbd955ce",null);e["default"]=b.exports},"53e2":function(t,e,n){var r=n("07e3"),i=n("241e"),o=n("5559")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},5559:function(t,e,n){var r=n("dbdb")("keys"),i=n("62a0");t.exports=function(t){return r[t]||(r[t]=i(t))}},"5b4e":function(t,e,n){var r=n("36c3"),i=n("b447"),o=n("0fc9");t.exports=function(t){return function(e,n,a){var s,c=r(e),u=i(c.length),f=o(a,u);if(t&&n!=n){while(u>f)if(s=c[f++],s!=s)return!0}else for(;u>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}}},"5d73":function(t,e,n){t.exports=n("469f")},"62a0":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},"6b70":function(t,e,n){"use strict";var r=n("9842"),i=n.n(r);i.a},"6c1c":function(t,e,n){n("c367");for(var r=n("e53d"),i=n("35e8"),o=n("481b"),a=n("5168")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],f=r[u],l=f&&f.prototype;l&&!l[a]&&i(l,a,u),o[u]=o.Array}},"71c1":function(t,e,n){var r=n("3a38"),i=n("25eb");t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):o:t?s.slice(c,c+2):a-56320+(o-55296<<10)+65536)}}},"7cd6":function(t,e,n){var r=n("40c3"),i=n("5168")("iterator"),o=n("481b");t.exports=n("584a").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},"7d7b":function(t,e,n){var r=n("e4ae"),i=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},"7e90":function(t,e,n){var r=n("d9f6"),i=n("e4ae"),o=n("c3a1");t.exports=n("8e60")?Object.defineProperties:function(t,e){i(t);var n,a=o(e),s=a.length,c=0;while(s>c)r.f(t,n=a[c++],e[n]);return t}},8436:function(t,e){t.exports=function(){}},"8f60":function(t,e,n){"use strict";var r=n("a159"),i=n("aebd"),o=n("45f2"),a={};n("35e8")(a,n("5168")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},9138:function(t,e,n){t.exports=n("35e8")},9842:function(t,e,n){},"9e6f":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"item",on:{click:t.ToDetail}},[n("div",{staticClass:"item_head"},[t._m(0),n("p",{staticClass:"order_id"},[t._v("订单编号："+t._s(t.data.timestamp+""+t.data.serial_id))]),t.ask||t.wait||t.riderAsk||t.riderPast||t.riderWait?n("p",{staticClass:"order_status"},[t._v(t._s(t.data.status))]):t._e()]),n("div",{staticClass:"item_line"}),n("div",{staticClass:"item_content"},[n("p",{staticClass:"time"},[t._v("下单时间："+t._s(t.data.created_at))]),n("p",{staticClass:"location"},[t._v("地址："+t._s(t.data.district+t.data.dormtype+t.data.building+"栋"+t.data.dorm))]),t.wait||t.finish?n("p",{staticClass:"phone"},[t._v("云鸽电话： "+t._s(t.data.deliveryphone))]):t._e(),t.riderAsk||t.riderPast||t.riderWait?n("p",{staticClass:"phone"},[t._v("用户电话： "+t._s(t.data.userphone))]):t._e(),t.wait?n("p",{staticClass:"arrive_time"},[t._v("预计"+t._s(t.data.time)+"分钟到达")]):t._e(),t.finish?n("p",{staticClass:"finish_text"},[t._v("已完成")]):t._e(),t.cancel?n("p",{staticClass:"cancel_text"},[t._v("已取消")]):t._e(),t.ask?n("input",{ref:"cancel_btn",staticClass:"cancel_btn",attrs:{type:"button",value:"取消订单"},on:{click:function(e){return e.stopPropagation(),t.ToCancel(e)}}}):t._e(),t.riderAsk?n("input",{ref:"accept_btn",staticClass:"accept_btn",attrs:{type:"button",value:"接单"},on:{click:function(e){return e.stopPropagation(),t.ToAccept(e)}}}):t._e()]),t.wait?n("input",{staticClass:"confirm_btn",attrs:{type:"button",value:"确认送达"},on:{click:function(e){return e.stopPropagation(),t.ToConfirmOrder(e)}}}):t._e()])])},i=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"img_wrapper"},[r("img",{attrs:{src:n("d7db"),alt:"dinning_room"}})])}],o=n("f20c"),a={name:"Item",props:["data","wait","ask","finish","cancel","riderAsk","riderPast","riderWait"],methods:{ToConfirmOrder:function(){this.$emit("ToConfirmOrder")},ToDetail:function(){Object(o["m"])("order_id",this.data.serial_id),this.$router.push("/orderDetail")},ToCancel:function(){this.$emit("ToCancel")},ToAccept:function(){this.$emit("ToAccept")}}},s=a,c=(n("3ecf"),n("2877")),u=Object(c["a"])(s,r,i,!1,null,"289acd49",null);e["a"]=u.exports},a159:function(t,e,n){var r=n("e4ae"),i=n("7e90"),o=n("1691"),a=n("5559")("IE_PROTO"),s=function(){},c="prototype",u=function(){var t,e=n("1ec9")("iframe"),r=o.length,i="<",a=">";e.style.display="none",n("32fc").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),u=t.F;while(r--)delete u[c][o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[c]=r(t),n=new s,s[c]=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},b447:function(t,e,n){var r=n("3a38"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},b8e3:function(t,e){t.exports=!0},c367:function(t,e,n){"use strict";var r=n("8436"),i=n("50ed"),o=n("481b"),a=n("36c3");t.exports=n("30f1")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},c3a1:function(t,e,n){var r=n("e6f3"),i=n("1691");t.exports=Object.keys||function(t){return r(t,i)}},cca7:function(t,e,n){},d7db:function(t,e,n){t.exports=n.p+"img/head.ff86e3ae.jpg"},dbdb:function(t,e,n){var r=n("584a"),i=n("e53d"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("b8e3")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},e6f3:function(t,e,n){var r=n("07e3"),i=n("36c3"),o=n("5b4e")(!1),a=n("5559")("IE_PROTO");t.exports=function(t,e){var n,s=i(t),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);while(e.length>c)r(s,n=e[c++])&&(~o(u,n)||u.push(n));return u}}}]);
//# sourceMappingURL=AskOrder.1de12135.js.map